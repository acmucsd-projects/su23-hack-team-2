/*! React InstantSearchCore UNRELEASED | Â© Algolia, inc. | https://github.com/algolia/instantsearch */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactInstantSearchCore={},e.React)}(this,function(e,g){"use strict";var s="default"in g?g.default:g,H="7.1.0";function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var W=r;function C(e){return"function"==typeof e}function L(e){return"object"==typeof e&&null!==e}function M(e){return void 0===e}r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,n,i,a,o,c;if((this._events||(this._events={}),"error"===e)&&(!this._events.error||L(this._events.error)&&!this._events.error.length))throw(c=arguments[1])instanceof Error?c:((o=new Error('Uncaught, unspecified "error" event. ('+c+")")).context=c,o);if(M(t=this._events[e]))return!1;if(C(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),t.apply(this,n)}else if(L(t))for(n=Array.prototype.slice.call(arguments,1),r=(a=t.slice()).length,i=0;i<r;i++)a[i].apply(this,n);return!0},r.prototype.on=r.prototype.addListener=function(e,t){if(C(t))return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,C(t.listener)?t.listener:t),this._events[e]?L(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,L(this._events[e])&&!this._events[e].warned&&(t=M(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<t&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace)&&console.trace(),this;throw TypeError("listener must be a function")},r.prototype.once=function(e,t){var r;if(C(t))return r=!1,n.listener=t,this.on(e,n),this;throw TypeError("listener must be a function");function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}},r.prototype.removeListener=function(e,t){var r,n,i,a;if(!C(t))throw TypeError("listener must be a function");if(this._events&&this._events[e])if(i=(r=this._events[e]).length,n=-1,r===t||C(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(L(r)){for(a=i;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(this._events)if(this._events.removeListener)if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);this.removeAllListeners("removeListener"),this._events={}}else{if(C(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);delete this._events[e]}else 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e];return this},r.prototype.listeners=function(e){e=this._events&&this._events[e]?C(this._events[e])?[this._events[e]]:this._events[e].slice():[];return e},r.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(C(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)};var U=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function Q(e,t){this.main=e,this.fn=t,this.lastResults=null}U(Q,W),Q.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},Q.prototype.getModifiedState=function(e){return this.fn(e)};var $=Q;var B=function(e){return"string"!=typeof e?e:String(e).replace(/^-/,"\\-")},q=function(e){return"string"!=typeof e?e:e.replace(/^\\-/,"-")};function V(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function J(e,t){var r,n;if(e!==t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&"__proto__"!==i&&"constructor"!==i&&(r=t[i],void 0!==(n=e[i])&&void 0===r||(V(n)&&V(r)?e[i]=J(n,r):e[i]="object"==typeof(n=r)&&null!==n?J(Array.isArray(n)?[]:{},n):n));return e}var z=function(e){V(e)||(e={});for(var t=1,r=arguments.length;t<r;t++){var n=arguments[t];V(n)&&J(e,n)}return e};var X=function(e){return e&&0<Object.keys(e).length};var K=function(e,t){if(null===e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n};function G(r){return Object.keys(r).sort().reduce(function(e,t){return e[t]=r[t],e},{})}function Z(){return Array.prototype.slice.call(arguments).reduceRight(function(t,r){return Object.keys(Object(r)).forEach(function(e){void 0!==r[e]&&(void 0!==t[e]&&delete t[e],t[e]=r[e])}),t},{})}var f={_getQueries:function(c,s){var u=[];return u.push({indexName:c,params:f._getHitsSearchParams(s)}),s.getRefinedDisjunctiveFacets().forEach(function(e){u.push({indexName:c,params:f._getDisjunctiveFacetSearchParams(s,e)})}),s.getRefinedHierarchicalFacets().forEach(function(e){var a,o=s.getHierarchicalFacetByName(e),e=s.getHierarchicalRefinement(e),n=s._getHierarchicalFacetSeparator(o);0<e.length&&1<e[0].split(n).length&&(a=e[0].split(n).slice(0,-1).reduce(function(e,t,r){return e.concat({attribute:o.attributes[r],value:0===r?t:[e[e.length-1].value,t].join(n)})},[])).forEach(function(e,t){e=f._getDisjunctiveFacetSearchParams(s,e.attribute,0===t);function n(t){return o.attributes.some(function(e){return e===t.split(":")[0]})}var r=(e.facetFilters||[]).reduce(function(e,t){var r;return Array.isArray(t)&&0<(r=t.filter(function(e){return!n(e)})).length&&e.push(r),"string"!=typeof t||n(t)||e.push(t),e},[]),i=a[t-1];e.facetFilters=0<t?r.concat(i.attribute+":"+i.value):0<r.length?r:void 0,u.push({indexName:c,params:e})})}),u},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(f._getHitsHierarchicalFacetsAttributes(e)).sort(),r=f._getFacetFilters(e),n=f._getNumericFilters(e),i=f._getTagFilters(e),t={facets:-1<t.indexOf("*")?["*"]:t,tagFilters:i};return 0<r.length&&(t.facetFilters=r),0<n.length&&(t.numericFilters=n),G(z({},e.getQueryParams(),t))},_getDisjunctiveFacetSearchParams:function(e,t,r){var n=f._getFacetFilters(e,t,r),i=f._getNumericFilters(e,t),a=f._getTagFilters(e),o={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1},a=(0<a.length&&(o.tagFilters=a),e.getHierarchicalFacetByName(t));return o.facets=a?f._getDisjunctiveHierarchicalFacetAttribute(e,a,r):t,0<i.length&&(o.numericFilters=i),0<n.length&&(o.facetFilters=n),G(z({},e.getQueryParams(),o))},_getNumericFilters:function(e,i){var a;return e.numericFilters||(a=[],Object.keys(e.numericRefinements).forEach(function(n){var t=e.numericRefinements[n]||{};Object.keys(t).forEach(function(r){var e=t[r]||[];i!==n&&e.forEach(function(e){var t;Array.isArray(e)?(t=e.map(function(e){return n+r+e}),a.push(t)):a.push(n+r+e)})})}),a)},_getTagFilters:function(e){return e.tagFilters||e.tagRefinements.join(",")},_getFacetFilters:function(o,c,s){var u=[],e=o.facetsRefinements||{},r=(Object.keys(e).sort().forEach(function(t){(e[t]||[]).sort().forEach(function(e){u.push(t+":"+e)})}),o.facetsExcludes||{}),n=(Object.keys(r).sort().forEach(function(t){(r[t]||[]).sort().forEach(function(e){u.push(t+":-"+e)})}),o.disjunctiveFacetsRefinements||{}),f=(Object.keys(n).sort().forEach(function(t){var r,e=n[t]||[];t!==c&&e&&0!==e.length&&(r=[],e.sort().forEach(function(e){r.push(t+":"+e)}),u.push(r))}),o.hierarchicalFacetsRefinements||{});return Object.keys(f).sort().forEach(function(e){var t=(f[e]||[])[0];if(void 0!==t){var r,n=o.getHierarchicalFacetByName(e),i=o._getHierarchicalFacetSeparator(n),a=o._getHierarchicalRootPath(n);if(c===e){if(-1===t.indexOf(i)||!a&&!0===s||a&&a.split(i).length===t.split(i).length)return;t=a?(r=a.split(i).length-1,a):(r=t.split(i).length-2,t.slice(0,t.lastIndexOf(i)))}else r=t.split(i).length-1;(e=n.attributes[r])&&u.push([e+":"+t])}}),u},_getHitsHierarchicalFacetsAttributes:function(i){return i.hierarchicalFacets.reduce(function(e,t){var r,n=i.getHierarchicalRefinement(t.name)[0];return n?(r=i._getHierarchicalFacetSeparator(t),n=n.split(r).length,r=t.attributes.slice(0,n+1),e.concat(r)):(e.push(t.attributes[0]),e)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var n,i=e._getHierarchicalFacetSeparator(t);return!0===r?(r=0,(n=e._getHierarchicalRootPath(t))&&(r=n.split(i).length),[t.attributes[r]]):(n=(e.getHierarchicalRefinement(t.name)[0]||"").split(i).length-1,t.attributes.slice(0,1+n))},getSearchForFacetQuery:function(e,t,r,n){n=n.isDisjunctiveFacet(e)?n.clearRefinements(e):n,t={facetQuery:t,facetName:e};return"number"==typeof r&&(t.maxFacetHits=r),G(z({},f._getHitsSearchParams(n),t))}},Y=f,m=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]};var ee=function(r,n){return r.filter(function(e,t){return-1<n.indexOf(e)&&r.indexOf(e)===t})};var te=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")},re={addRefinement:function(e,t,r){var n;return re.isRefined(e,t,r)?e:(r=""+r,r=e[t]?e[t].concat(r):[r],(n={})[t]=r,Z({},n,e))},removeRefinement:function(e,r,t){var n;return void 0===t?re.clearRefinement(e,function(e,t){return r===t}):(n=""+t,re.clearRefinement(e,function(e,t){return r===t&&n===e}))},toggleRefinement:function(e,t,r){if(void 0===r)throw new Error("toggleRefinement should be used with a value");return re.isRefined(e,t,r)?re.removeRefinement(e,t,r):re.addRefinement(e,t,r)},clearRefinement:function(i,a,o){var c,e;return void 0===a?X(i)?{}:i:"string"==typeof a?K(i,[a]):"function"==typeof a?(c=!1,e=Object.keys(i).reduce(function(e,t){var r=i[t]||[],n=r.filter(function(e){return!a(e,t,o)});return n.length!==r.length&&(c=!0),e[t]=n,e},{}),c?e:i):void 0},isRefined:function(e,t,r){var n=Boolean(e[t])&&0<e[t].length;return void 0!==r&&n?-1!==e[t].indexOf(""+r):n}},n=re;function ne(e,r){return Array.isArray(e)&&Array.isArray(r)?e.length===r.length&&e.every(function(e,t){return ne(r[t],e)}):e===r}function o(e){var n=e?o._parseNumbers(e):{},i=(void 0===n.userToken||null!==(e=n.userToken)&&/^[a-zA-Z0-9_-]{1,64}$/.test(e)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=n.facets||[],this.disjunctiveFacets=n.disjunctiveFacets||[],this.hierarchicalFacets=n.hierarchicalFacets||[],this.facetsRefinements=n.facetsRefinements||{},this.facetsExcludes=n.facetsExcludes||{},this.disjunctiveFacetsRefinements=n.disjunctiveFacetsRefinements||{},this.numericRefinements=n.numericRefinements||{},this.tagRefinements=n.tagRefinements||[],this.hierarchicalFacetsRefinements=n.hierarchicalFacetsRefinements||{},this);Object.keys(n).forEach(function(e){var t=-1!==o.PARAMETERS.indexOf(e),r=void 0!==n[e];!t&&r&&(i[e]=n[e])})}o.PARAMETERS=Object.keys(new o),o._parseNumbers=function(i){var n,a;return i instanceof o?i:(n={},["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach(function(e){var t,r=i[e];"string"==typeof r&&(t=parseFloat(r),n[e]=isNaN(t)?r:t)}),Array.isArray(i.insideBoundingBox)&&(n.insideBoundingBox=i.insideBoundingBox.map(function(e){return Array.isArray(e)?e.map(function(e){return parseFloat(e)}):e})),i.numericRefinements&&(a={},Object.keys(i.numericRefinements).forEach(function(r){var n=i.numericRefinements[r]||{};a[r]={},Object.keys(n).forEach(function(e){var t=n[e].map(function(e){return Array.isArray(e)?e.map(function(e){return"string"==typeof e?parseFloat(e):e}):"string"==typeof e?parseFloat(e):e});a[r][e]=t})}),n.numericRefinements=a),z({},i,n))},o.make=function(e){var r=new o(e);return(e.hierarchicalFacets||[]).forEach(function(e){var t;e.rootPath&&0===(t=(r=0<(t=r.getHierarchicalRefinement(e.name)).length&&0!==t[0].indexOf(e.rootPath)?r.clearRefinements(e.name):r).getHierarchicalRefinement(e.name)).length&&(r=r.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}),r},o.validate=function(e,t){t=t||{};return e.tagFilters&&t.tagRefinements&&0<t.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&t.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&t.numericRefinements&&X(t.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):X(e.numericRefinements)&&t.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},o.prototype={constructor:o,clearRefinements:function(e){e={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:n.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:n.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:n.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:n.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return e.numericRefinements===this.numericRefinements&&e.facetsRefinements===this.facetsRefinements&&e.facetsExcludes===this.facetsExcludes&&e.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&e.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(e)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,r){var n,r=te(r);return this.isNumericRefined(e,t,r)?this:((n=z({},this.numericRefinements))[e]=z({},n[e]),n[e][t]?(n[e][t]=n[e][t].slice(),n[e][t].push(r)):n[e][t]=[r],this.setQueryParameters({numericRefinements:n}))},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(r,n,e){var i=e;return void 0!==i?this.isNumericRefined(r,n,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n&&ne(e.val,te(i))})}):this:void 0!==n?this.isNumericRefined(r,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n})}):this:this.isNumericRefined(r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(o){var c,t,e;return void 0===o?X(this.numericRefinements)?{}:this.numericRefinements:"string"==typeof o?K(this.numericRefinements,[o]):"function"==typeof o?(c=!1,t=this.numericRefinements,e=Object.keys(t).reduce(function(e,n){var i=t[n],a={},i=i||{};return Object.keys(i).forEach(function(t){var e=i[t]||[],r=[];e.forEach(function(e){o({val:e,op:t},n,"numeric")||r.push(e)}),r.length!==e.length&&(c=!0),a[t]=r}),e[n]=a,e},{}),c?e:this.numericRefinements):void 0},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:n.addRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:n.addRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:n.addRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},addTagRefinement:function(e){return this.isTagRefined(e)?this:(e={tagRefinements:this.tagRefinements.concat(e)},this.setQueryParameters(e))},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:n.removeRefinement(this.facetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:n.removeRefinement(this.facetsExcludes,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:n.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},removeTagRefinement:function(t){var e;return this.isTagRefined(t)?(e={tagRefinements:this.tagRefinements.filter(function(e){return e!==t})},this.setQueryParameters(e)):this},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsRefinements:n.toggleRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleExcludeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsExcludes:n.toggleRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return this.setQueryParameters({disjunctiveFacetsRefinements:n.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},toggleHierarchicalFacetRefinement:function(e,t){var r,n;if(this.isHierarchicalFacet(e))return r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n={},void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+r))?-1===t.indexOf(r)?n[e]=[]:n[e]=[t.slice(0,t.lastIndexOf(r))]:n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:Z({},n,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration")},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var r;if(this.isHierarchicalFacet(e))return(r={})[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:Z({},r,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.")},removeHierarchicalFacetRefinement:function(e){var t;return this.isHierarchicalFacetRefined(e)?((t={})[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:Z({},t,this.hierarchicalFacetsRefinements)})):this},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<this.disjunctiveFacets.indexOf(e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<this.facets.indexOf(e)},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&n.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){return!!this.isHierarchicalFacet(e)&&(e=this.getHierarchicalRefinement(e),t?-1!==e.indexOf(t):0<e.length)},isNumericRefined:function(e,t,r){var n,i;return void 0===r&&void 0===t?Boolean(this.numericRefinements[e]):(n=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t],void 0!==r&&n?(r=te(r),t=void 0!==(e=this.numericRefinements[e][t],i=r,m(e,function(e){return ne(e,i)})),n&&t):n)},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var t=this,e=ee(Object.keys(this.numericRefinements).filter(function(e){return 0<Object.keys(t.numericRefinements[e]).length}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(e){return 0<t.disjunctiveFacetsRefinements[e].length}).concat(e).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return ee(this.hierarchicalFacets.map(function(e){return e.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(e){return 0<t.hierarchicalFacetsRefinements[e].length})).sort()},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return-1===t.indexOf(e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var r=this.managedParameters,n={},i=this;return Object.keys(this).forEach(function(e){var t=i[e];-1===r.indexOf(e)&&void 0!==t&&(n[e]=t)}),n},setQueryParameter:function(e,t){var r;return this[e]===t?this:((r={})[e]=t,this.setQueryParameters(r))},setQueryParameters:function(e){if(!e)return this;var t=o.validate(this,e);if(t)throw t;var r=this,i=o._parseNumbers(e),t=Object.keys(this).reduce(function(e,t){return e[t]=r[t],e},{}),e=Object.keys(i).reduce(function(e,t){var r=void 0!==e[t],n=void 0!==i[t];return r&&!n?K(e,[t]):(n&&(e[t]=i[t]),e)},t);return new this.constructor(e)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(t){return m(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(e){var t;return this.isHierarchicalFacet(e)&&(t=this.getHierarchicalRefinement(e)[0])?(e=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),t.split(e).map(function(e){return e.trim()})):[]},toString:function(){return JSON.stringify(this,null,2)}};function ie(e){return Array.isArray(e)?e.filter(Boolean):[]}function ae(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function oe(e,t){var n=(t||[]).map(function(e){return e.split(":")});return e.reduce(function(e,t){var r=t.split(":"),t=m(n,function(e){return e[0]===r[0]});return 1<r.length||!t?(e[0].push(r[0]),e[1].push(r[1])):(e[0].push(t[0]),e[1].push(t[1])),e},[[],[]])}var ce=o;var se=function(e,r,i){return Array.isArray(e)?(Array.isArray(i)||(i=[]),(e=e.map(function(t,e){return{criteria:r.map(function(e){return t[e]}),index:e,value:t}})).sort(function(e,t){for(var r=-1;++r<e.criteria.length;){var n=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=void 0!==t,a=null===t;if(!a&&t<e||n&&i||!r)return 1;if(!n&&e<t||a&&r||!i)return-1}return 0}(e.criteria[r],t.criteria[r]);if(n)return!(r>=i.length)&&"desc"===i[r]?-n:n}return e.index-t.index}),e.map(function(e){return e.value})):[]},ue=function(p){return function(e,t){function r(e,o,t){var r,c=e;if(0<t){var n=0;for(c=e;n<t;){var i=c&&Array.isArray(c.data)?c.data:[],c=m(i,function(e){return e.isRefined});n++}}return c&&(r=Object.keys(o.data).map(function(e){return[e,o.data[e]]}).filter(function(e){var t,r,n,i,a,e=e[0];return e=e,t=c.path||u,r=l,n=s,a=f,(!(i=u)||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(n)||i&&e.split(n).length-i.split(n).length==1||-1===e.indexOf(n)&&-1===r.indexOf(n)||0===r.indexOf(e)||0===e.indexOf(t+n)&&(a||0===e.indexOf(r)))}),c.data=se(r.map(function(e){var t,r,n,i,a=e[0],e=e[1];return e=e,a=a,t=s,r=le(l),n=o.exhaustive,{name:(i=a.split(t))[i.length-1].trim(),path:a,escapedValue:fe(a),count:e,isRefined:r===a||0===r.indexOf(a+t),exhaustive:n,data:null}}),a[0],a[1])),e}var a,s,u,f,l,n=p.hierarchicalFacets[t],i=p.hierarchicalFacetsRefinements[n.name]&&p.hierarchicalFacetsRefinements[n.name][0]||"",o=p._getHierarchicalFacetSeparator(n),c=p._getHierarchicalRootPath(n),h=p._getHierarchicalShowParentLevel(n),n=oe(p._getHierarchicalFacetSortBy(n)),d=e.every(function(e){return e.exhaustive}),n=(a=n,s=o,f=h,l=i,e);return(n=(u=c)?e.slice(c.split(o).length):n).reduce(r,{name:p.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:d,data:null})}},fe=B,le=q;var he=B,de=q;function pe(e){var r={};return e.forEach(function(e,t){r[e]=t}),r}function me(e,t,r){t&&t[r]&&(e.stats=t[r])}function ge(f,t,r){var c=t[0],l=(this._rawResults=t,this),e=(Object.keys(c).forEach(function(e){l[e]=c[e]}),Object.keys(r||{}).forEach(function(e){l[e]=r[e]}),this.processingTimeMS=t.reduce(function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=f.hierarchicalFacets.map(function(){return[]}),this.facets=[],f.getRefinedDisjunctiveFacets()),s=pe(f.facets),u=pe(f.disjunctiveFacets),n=1,h=c.facets||{};Object.keys(h).forEach(function(e){var t,r,n,i,a=h[e],o=(n=f.hierarchicalFacets,t=e,m(n,function(e){return-1<(e.attributes||[]).indexOf(t)}));o?(n=o.attributes.indexOf(e),r=ae(f.hierarchicalFacets,function(e){return e.name===o.name}),l.hierarchicalFacets[r][n]={attribute:e,data:a,exhaustive:c.exhaustiveFacetsCount}):(r=-1!==f.disjunctiveFacets.indexOf(e),n=-1!==f.facets.indexOf(e),r&&(i=u[e],l.disjunctiveFacets[i]={name:e,data:a,exhaustive:c.exhaustiveFacetsCount},me(l.disjunctiveFacets[i],c.facets_stats,e)),n&&(i=s[e],l.facets[i]={name:e,data:a,exhaustive:c.exhaustiveFacetsCount},me(l.facets[i],c.facets_stats,e)))}),this.hierarchicalFacets=ie(this.hierarchicalFacets),e.forEach(function(e){var i=t[n],a=i&&i.facets?i.facets:{},o=f.getHierarchicalFacetByName(e);Object.keys(a).forEach(function(t){var r,e,n=a[t];o?(r=ae(f.hierarchicalFacets,function(e){return e.name===o.name}),-1!==(e=ae(l.hierarchicalFacets[r],function(e){return e.attribute===t}))&&(l.hierarchicalFacets[r][e].data=z({},l.hierarchicalFacets[r][e].data,n))):(r=u[t],e=c.facets&&c.facets[t]||{},l.disjunctiveFacets[r]={name:t,data:Z({},n,e),exhaustive:i.exhaustiveFacetsCount},me(l.disjunctiveFacets[r],i.facets_stats,t),f.disjunctiveFacetsRefinements[t]&&f.disjunctiveFacetsRefinements[t].forEach(function(e){!l.disjunctiveFacets[r].data[e]&&-1<f.disjunctiveFacetsRefinements[t].indexOf(de(e))&&(l.disjunctiveFacets[r].data[e]=0)}))}),n++}),f.getRefinedHierarchicalFacets().forEach(function(e){var c=f.getHierarchicalFacetByName(e),s=f._getHierarchicalFacetSeparator(c),u=f.getHierarchicalRefinement(e);0===u.length||u[0].split(s).length<2||t.slice(n).forEach(function(e){var o=e&&e.facets?e.facets:{};Object.keys(o).forEach(function(t){var e,r,n=o[t],i=ae(f.hierarchicalFacets,function(e){return e.name===c.name}),a=ae(l.hierarchicalFacets[i],function(e){return e.attribute===t});-1!==a&&(e={},0<u.length&&(e[r=u[0].split(s)[0]]=l.hierarchicalFacets[i][a].data[r]),l.hierarchicalFacets[i][a].data=Z(e,n,l.hierarchicalFacets[i][a].data))}),n++})}),Object.keys(f.facetsExcludes).forEach(function(t){var e=f.facetsExcludes[t],r=s[t];l.facets[r]={name:t,data:h[t],exhaustive:c.exhaustiveFacetsCount},e.forEach(function(e){l.facets[r]=l.facets[r]||{name:t},l.facets[r].data=l.facets[r].data||{},l.facets[r].data[e]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(ue(f)),this.facets=ie(this.facets),this.disjunctiveFacets=ie(this.disjunctiveFacets),this._state=f}function ye(r,n){function e(e){return e.name===n}var i,a,t,o,c,s;return r._state.isConjunctiveFacet(n)?(i=m(r.facets,e))?Object.keys(i.data).map(function(e){var t=he(e);return{name:e,escapedValue:t,count:i.data[e],isRefined:r._state.isFacetRefined(n,t),isExcluded:r._state.isExcludeRefined(n,e)}}):[]:r._state.isDisjunctiveFacet(n)?(a=m(r.disjunctiveFacets,e))?Object.keys(a.data).map(function(e){var t=he(e);return{name:e,escapedValue:t,count:a.data[e],isRefined:r._state.isDisjunctiveFacetRefined(n,t)}}):[]:r._state.isHierarchicalFacet(n)?((t=m(r.hierarchicalFacets,e))&&(s=r._state.getHierarchicalFacetByName(n),o=r._state._getHierarchicalFacetSeparator(s),(s=(c=0===(c=de(r._state.getHierarchicalRefinement(n)[0]||"")).indexOf(s.rootPath)?c.replace(s.rootPath+o,""):c).split(o)).unshift(n),function t(e,r,n){e.isRefined=e.name===r[n];e.data&&e.data.forEach(function(e){t(e,r,n+1)})}(t,s,0)),t):void 0}function ve(e,t){e=m(e,function(e){return e.name===t});return e&&e.stats}function be(e,t,r,n,i){var i=m(i,function(e){return e.name===r}),a=i&&i.data&&i.data[n]?i.data[n]:0,i=i&&i.exhaustive||!1;return{type:t,attributeName:r,name:n,count:a,exhaustive:i}}ge.prototype.getFacetByName=function(t){function e(e){return e.name===t}return m(this.facets,e)||m(this.disjunctiveFacets,e)||m(this.hierarchicalFacets,e)},ge.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],ge.prototype.getFacetValues=function(e,t){var o,c,r=ye(this,e);if(r)return o=Z({},t,{sortBy:ge.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),c=this,function t(r,e,n,i){var a;return i=i||0,Array.isArray(e)?r(e,n[i]):e.data&&0!==e.data.length?(a=e.data.map(function(e){return t(r,e,n,i+1)}),a=r(a,n[i]),Z({data:a},e)):e}(function(e,t){if(o.facetOrdering){t=t;a=(a=c).renderingContent&&a.renderingContent.facetOrdering&&a.renderingContent.facetOrdering.values&&a.renderingContent.facetOrdering.values[t];if(a)return t=e,r=[],n=[],i=((a=a).order||[]).reduce(function(e,t,r){return e[t]=r,e},{}),t.forEach(function(e){var t=e.path||e.name;void 0!==i[t]?r[i[t]]=e:n.push(e)}),r=r.filter(function(e){return e}),"hidden"===(t=a.sortRemainingBy)?r:r.concat(se(n,(a="alpha"===t?[["path","name"],["asc","asc"]]:[["count"],["desc"]])[0],a[1]))}var r,n,i,a;if(Array.isArray(o.sortBy))return t=oe(o.sortBy,ge.DEFAULT_SORT),se(e,t[0],t[1]);if("function"==typeof o.sortBy)return a=o.sortBy,e.sort(a);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},r,Array.isArray(r)?[e]:c._state.getHierarchicalFacetByName(r.name).attributes)},ge.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?ve(this.facets,e):this._state.isDisjunctiveFacet(e)?ve(this.disjunctiveFacets,e):void 0},ge.prototype.getRefinements=function(){var o=this._state,c=this,s=[];return Object.keys(o.facetsRefinements).forEach(function(t){o.facetsRefinements[t].forEach(function(e){s.push(be(0,"facet",t,e,c.facets))})}),Object.keys(o.facetsExcludes).forEach(function(t){o.facetsExcludes[t].forEach(function(e){s.push(be(0,"exclude",t,e,c.facets))})}),Object.keys(o.disjunctiveFacetsRefinements).forEach(function(t){o.disjunctiveFacetsRefinements[t].forEach(function(e){s.push(be(0,"disjunctive",t,e,c.disjunctiveFacets))})}),Object.keys(o.hierarchicalFacetsRefinements).forEach(function(a){o.hierarchicalFacetsRefinements[a].forEach(function(e){var t,r,n,i;s.push((t=o,r=a,e=e,n=c.hierarchicalFacets,i=t.getHierarchicalFacetByName(r),t=t._getHierarchicalFacetSeparator(i),i=e.split(t),e=m(n,function(e){return e.name===r}),t=i.reduce(function(e,t){var r=e&&m(e.data,function(e){return e.name===t});return void 0!==r?r:e},e),n=t&&t.count||0,i=t&&t.exhaustive||!1,e=t&&t.path||"",{type:"hierarchical",attributeName:r,name:e,count:n,exhaustive:i}))})}),Object.keys(o.numericRefinements).forEach(function(r){var e=o.numericRefinements[r];Object.keys(e).forEach(function(t){e[t].forEach(function(e){s.push({type:"numeric",attributeName:r,name:e,numericValue:e,operator:t})})})}),o.tagRefinements.forEach(function(e){s.push({type:"tag",attributeName:"_tags",name:e})}),s};var Se=ge,q="3.14.2",Oe=B;function t(e,t,r){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.14.2)"),this.setClient(e);e=r||{};e.index=t,this.state=ce.make(e),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function we(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function je(){return this.state.page}U(t,W),t.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},t.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},t.prototype.getQuery=function(){var e=this.state;return Y._getHitsSearchParams(e)},t.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,e=Y._getQueries(r.index,r),n=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:r}),!t)return this.client.search(e).then(function(e){return n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),{content:new Se(r,e.results),state:r,_originalResponse:e}},function(e){throw n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),e});this.client.search(e).then(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(null,new Se(r,e.results),r)}).catch(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(e,null,r)})},t.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,r=this.derivedHelpers[0];if(!r)return Promise.resolve([]);var r=r.getModifiedState(t),t=z({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:K(Y._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),n="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if("function"!=typeof this.client.initIndex)throw new Error(n);var i=this.client.initIndex(r.index);if("function"!=typeof i.findAnswers)throw new Error(n);return i.findAnswers(r.query,e.queryLanguages,t)},t.prototype.searchForFacetValues=function(t,e,r,n){var i,a,o,c="function"==typeof this.client.searchForFacetValues,s="function"==typeof this.client.initIndex;if(c||s||"function"==typeof this.client.search)return i=this.state.setQueryParameters(n||{}),a=i.isDisjunctiveFacet(t),n=Y.getSearchForFacetQuery(t,e,r,i),this._currentNbQueries++,o=this,r=c?this.client.searchForFacetValues([{indexName:i.index,params:n}]):s?this.client.initIndex(i.index).searchForFacetValues(n):(delete n.facetName,this.client.search([{type:"facet",facet:t,indexName:i.index,params:n}]).then(function(e){return e.results[0]})),this.emit("searchForFacetValues",{state:i,facet:t,query:e}),r.then(function(e){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits.forEach(function(e){e.escapedValue=Oe(e.value),e.isRefined=a?i.isDisjunctiveFacetRefined(t,e.escapedValue):i.isFacetRefined(t,e.escapedValue)}),e},function(e){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e});throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues")},t.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},t.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},t.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},t.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},t.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.addNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,r),isPageReset:!0}),this},t.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},t.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},t.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},t.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},t.prototype.removeNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,r),isPageReset:!0}),this},t.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},t.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},t.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},t.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},t.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},t.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},t.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},t.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},t.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},t.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},t.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},t.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},t.prototype.setCurrentPage=we,t.prototype.setPage=we,t.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},t.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},t.prototype.setState=function(e){return this._change({state:ce.make(e),isPageReset:!1}),this},t.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new ce(e),this},t.prototype.hasRefinements=function(e){return!!X(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},t.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},t.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},t.prototype.hasTag=function(e){return this.state.isTagRefined(e)},t.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},t.prototype.getIndex=function(){return this.state.index},t.prototype.getCurrentPage=je,t.prototype.getPage=je,t.prototype.getTags=function(){return this.state.tagRefinements},t.prototype.getRefinements=function(e){var r=[],n=(this.state.isConjunctiveFacet(e)?(this.state.getConjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"conjunctive"})}),this.state.getExcludeRefinements(e).forEach(function(e){r.push({value:e,type:"exclude"})})):this.state.isDisjunctiveFacet(e)&&this.state.getDisjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"disjunctive"})}),this.state.getNumericRefinements(e));return Object.keys(n).forEach(function(e){var t=n[e];r.push({value:t,operator:e,type:"numeric"})}),r},t.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},t.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},t.prototype._search=function(e){var n=this.state,i=[],t=[],e=(e.onlyWithDerivedHelpers||(t=Y._getQueries(n.index,n),i.push({state:n,queriesCount:t.length,helper:this}),this.emit("search",{state:n,results:this.lastResults})),this.derivedHelpers.map(function(e){var t=e.getModifiedState(n),r=t.index?Y._getQueries(t.index,t):[];return i.push({state:t,queriesCount:r.length,helper:e}),e.emit("search",{state:t,results:e.lastResults}),r})),t=Array.prototype.concat.apply(t,e),e=this._queryId++;if(this._currentNbQueries++,!t.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,i,e));try{this.client.search(t).then(this._dispatchAlgoliaResponse.bind(this,i,e)).catch(this._dispatchAlgoliaError.bind(this,e))}catch(e){this.emit("error",{error:e})}},t.prototype._dispatchAlgoliaResponse=function(e,t,r){var n;t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty"),n=r.results.slice(),e.forEach(function(e){var t=e.state,r=e.queriesCount,e=e.helper,r=n.splice(0,r);t.index?(e.lastResults=new Se(t,r),e.emit("result",{results:e.lastResults,state:t})):e.emit("result",{results:null,state:t})}))},t.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},t.prototype.containsRefinement=function(e,t,r,n){return e||0!==t.length||0!==r.length||0!==n.length},t.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},t.prototype._change=function(e){var t=e.state,e=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:e}))},t.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},t.prototype.setClient=function(e){return this.client!==e&&("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.14.2)"),this.client=e),this},t.prototype.getClient=function(){return this.client},t.prototype.derive=function(e){e=new $(this,e);return this.derivedHelpers.push(e),e},t.prototype.detachDerivedHelper=function(e){e=this.derivedHelpers.indexOf(e);if(-1===e)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)},t.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var Pe=t;function Re(e,t,r){return new Pe(e,t,r)}Re.version=q,Re.AlgoliaSearchHelper=Pe,Re.SearchParameters=ce,Re.SearchResults=Se;var y=Re,B=("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}).performance||{};B.now||B.mozNow||B.msNow||B.oNow||B.webkitNow;function v(){}function h(e,t){if(void 0===e||"function"!=typeof e)throw new Error("The render function is not valid (received type ".concat(Object.prototype.toString.call(e).slice(8,-1),").\n\n").concat(t))}function Fe(e){var t=e.helper,e=e.attributesToClear,e=void 0===e?[]:e,r=t.state.setPage(0),r=e.reduce(function(e,t){return r.isNumericRefined(t)?e.removeNumericRefinement(t):r.isHierarchicalFacet(t)?e.removeHierarchicalFacetRefinement(t):r.isDisjunctiveFacet(t)?e.removeDisjunctiveFacetRefinement(t):r.isConjunctiveFacet(t)?e.removeFacetRefinement(t):e},r);return r=-1!==e.indexOf("query")?r.setQuery(""):r}var xe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ee=/[&<>"']/g,Ie=RegExp(Ee.source);var Ae={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Te=/&(amp|quot|lt|gt|#39);/g,_e=RegExp(Te.source);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e){if("object"===De(t=e)&&null!==t&&"[object Object]"===(null===(t=e)?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t))){var t;if(null===Object.getPrototypeOf(e))return 1;for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}}function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(){return(He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function We(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ce(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?We(Object(r),!0).forEach(function(e){Le(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Le(e,t,r){return(t=function(e){e=function(e,t){if("object"!==ke(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ke(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Me={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},u={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function Ue(e){return((e=e)&&Ie.test(e)?e.replace(Ee,function(e){return xe[e]}):e).replace(new RegExp(Me.highlightPreTag,"g"),u.highlightPreTag).replace(new RegExp(Me.highlightPostTag,"g"),u.highlightPostTag)}function Qe(r){return Ne(r)&&"string"!=typeof r.value?Object.keys(r).reduce(function(e,t){return Ce(Ce({},e),{},Le({},t,Qe(r[t])))},{}):Array.isArray(r)?r.map(Qe):Ce(Ce({},r),{},{value:Ue(r.value)})}function $e(e){return void 0===e.__escaped&&((e=e.map(function(e){e=He({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return e._highlightResult&&(e._highlightResult=Qe(e._highlightResult)),e._snippetResult&&(e._snippetResult=Qe(e._snippetResult)),e})).__escaped=!0),e}function Be(e){var t=u.highlightPreTag,r=u.highlightPostTag;return e.map(function(e){return e.isHighlighted?t+e.value+r:e.value}).join("")}function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?Je(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Je(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ze(e){var l=e.instantSearchInstance,h=e.helper,d=e.attribute,p=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,a,o=t[1],c=t[2],c=void 0===c?"Filter Applied":c,s=Ve(t[0].split(":"),2),u=s[0],s=s[1],f="string"==typeof d?d:d(o);1===t.length&&"object"===qe(t[0])?l.sendEventToInsights(t[0]):"click"!==u||2!==t.length&&3!==t.length||(i=f,a=o,(n=h).state.isHierarchicalFacet(i)?n.state.isHierarchicalFacetRefined(i,a):n.state.isConjunctiveFacet(i)?n.state.isFacetRefined(i,a):n.state.isDisjunctiveFacetRefined(i,a))||l.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:p,eventType:u,eventModifier:s,payload:{eventName:c,index:h.getIndex(),filters:["".concat(f,":").concat(o)]},attribute:f})}}function Xe(e){return btoa(encodeURIComponent(JSON.stringify(e)))}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?Ge(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ge(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e){var r,n,i,a,t,o,c,s=e.index,u=e.widgetType,f=(e.methodName,e.args),e=e.instantSearchInstance;return 1===f.length&&"object"===Ze(f[0])?[f[0]]:(t=Ke(f[0].split(":"),2),r=t[0],n=t[1],t=f[1],i=f[2],!t||!("click"!==r&&"conversion"!==r||i)||0===(f=Array.isArray(t)?t:[t]).length?[]:(a=f[0].__queryID,t=function(e,t){for(var r=1<arguments.length&&void 0!==t?t:20,n=[],i=0;i<Math.ceil(e.length/r);i++)n.push(e.slice(i*r,(i+1)*r));return n}(f),o=t.map(function(e){return e.map(function(e){return e.objectID})}),c=t.map(function(e){return e.map(function(e){return e.__position})}),"view"===r?"idle"!==e.status?[]:t.map(function(e,t){return{insightsMethod:"viewedObjectIDs",widgetType:u,eventType:r,payload:{eventName:i||"Hits Viewed",index:s,objectIDs:o[t]},hits:e,eventModifier:n}}):"click"===r?t.map(function(e,t){return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:u,eventType:r,payload:{eventName:i||"Hit Clicked",index:s,queryID:a,objectIDs:o[t],positions:c[t]},hits:e,eventModifier:n}}):"conversion"===r?t.map(function(e,t){return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:u,eventType:r,payload:{eventName:i||"Hit Converted",index:s,queryID:a,objectIDs:o[t]},hits:e,eventModifier:n}}):[]))}function et(e){var n=e.instantSearchInstance,i=e.index,a=e.widgetType,o={},c=void 0;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Ye({widgetType:a,index:i,methodName:"sendEvent",args:t,instantSearchInstance:n}).forEach(function(e){"click"===e.eventType&&"internal"===e.eventModifier&&o[e.eventType]||(o[e.eventType]=!0,n.sendEventToInsights(e))}),clearTimeout(c),c=setTimeout(function(){o={}},0)}}function tt(e){var i=e.index,a=e.widgetType,o=e.instantSearchInstance;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Ye({widgetType:a,index:i,methodName:"bindEvent",args:t,instantSearchInstance:o});return n.length?"data-insights-event=".concat(Xe(n)):""}}function rt(e){return"ais.index"===e.$$type}function nt(t,e){var r=t[e.getIndexId()]||{};e.getHelper().setState(e.getWidgetSearchParameters(e.getHelper().state,{uiState:r})),e.getWidgets().filter(rt).forEach(function(e){return nt(t,e)})}var it=Promise.resolve();function at(n){function e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];null===i&&(i=it.then(function(){i=null,a?a=!1:n.apply(void 0,t)}))}var i=null,a=!1;return e.wait=function(){if(null===i)throw new Error("The deferred function should be called before calling `wait()`");return i},e.cancel=function(){null!==i&&(a=!0)},e}function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(function(e){return t=(e=e).name,e=e.connector,["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",void 0!==e&&e?"#connector":""].join("");var t}).join(", ");return function(e){return[e,"See documentation: ".concat(n)].filter(Boolean).join("\n\n")}}function ot(e){return"number"==typeof e&&e<0||"string"==typeof e?String(e).replace(/^-/,"\\-"):e}function ct(e,t){for(var r,n=0;n<e.length;n++)if(t(r=e[n],n,e))return r}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?ut(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ft=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/;function lt(e){if(Array.isArray(e)){var t=e,r=st(t,1)[0],n=(r=st(void 0===r?[void 0,void 0,void 0,void 0]:r,4))[0],i=r[1],a=r[2],r=r[3];if(n&&i&&a&&r)return{northEast:{lat:n,lng:i},southWest:{lat:a,lng:r}};throw new Error('Invalid value for "insideBoundingBox" parameter: ['.concat(t,"]"))}n=e,a=(i=st(n.split(",").map(parseFloat),4))[0],r=i[1],t=i[2],i=i[3];if(a&&r&&t&&i)return{northEast:{lat:a,lng:r},southWest:{lat:t,lng:i}};throw new Error('Invalid value for "insideBoundingBox" parameter: "'.concat(n,'"'))}function ht(e){var t=u.highlightPostTag,r=u.highlightPreTag,e=e.split(r),r=e.shift(),n=r?[{value:r,isHighlighted:!1}]:[];return e.forEach(function(e){e=e.split(t);n.push({value:e[0],isHighlighted:!0}),""!==e[1]&&n.push({value:e[1],isHighlighted:!1})}),n}var dt=new RegExp(/\w/i);function pt(e,t){var r=e[t],n=(null==(n=e[t+1])?void 0:n.isHighlighted)||!0,t=(null==(e=e[t-1])?void 0:e.isHighlighted)||!0;return dt.test((e=r.value)&&_e.test(e)?e.replace(Te,function(e){return Ae[e]}):e)||t!==n?r.isHighlighted:t}function mt(e,t){return(Array.isArray(t)?t:t.split(".")).reduce(function(e,t){return e&&e[t]},e)}function gt(e,t,r,n,i){var a,i=4<arguments.length&&void 0!==i?i:[],o={type:t,attribute:r,name:n,escapedValue:ot(n)},c=ct(i,function(e){return e.name===r});if("hierarchical"===t){for(var i=e.getHierarchicalFacetByName(r),s=n.split(i.separator),u=0;void 0!==c&&u<s.length;++u)!function(t){var r;c=c&&c.data&&ct(Object.keys(c.data).map((r=c.data,function(e){return r[e]})),function(e){return e.name===s[t]})}(u);a=c&&c.count}else a=c&&c.data&&c.data[o.name];return void 0!==a&&(o.count=a),c&&void 0!==c.exhaustive&&(o.exhaustive=c.exhaustive),o}function yt(r,n,e){var e=2<arguments.length&&void 0!==e&&e,i=[],t=n.facetsRefinements,a=void 0===t?{}:t,t=n.facetsExcludes,o=void 0===t?{}:t,t=n.disjunctiveFacetsRefinements,c=void 0===t?{}:t,t=n.hierarchicalFacetsRefinements,s=void 0===t?{}:t,t=n.numericRefinements,u=void 0===t?{}:t,t=n.tagRefinements,t=void 0===t?[]:t;return Object.keys(a).forEach(function(t){a[t].forEach(function(e){i.push(gt(n,"facet",t,e,r.facets))})}),Object.keys(o).forEach(function(t){o[t].forEach(function(e){i.push({type:"exclude",attribute:t,name:e,exclude:!0})})}),Object.keys(c).forEach(function(t){c[t].forEach(function(e){i.push(gt(n,"disjunctive",t,"string"==typeof(e=e)?e.replace(/^\\-/,"-"):e,r.disjunctiveFacets))})}),Object.keys(s).forEach(function(t){s[t].forEach(function(e){i.push(gt(n,"hierarchical",t,e,r.hierarchicalFacets))})}),Object.keys(u).forEach(function(r){var n=u[r];Object.keys(n).forEach(function(e){var t=e,e=n[t];(Array.isArray(e)?e:[e]).forEach(function(e){i.push({type:"numeric",attribute:r,name:"".concat(e),numericValue:e,operator:t})})})}),t.forEach(function(e){i.push({type:"tag",attribute:"_tags",name:e})}),e&&n.query&&n.query.trim()&&i.push({attribute:"query",type:"query",name:n.query,query:n.query}),i}function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function St(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==vt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===vt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):bt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ot(e,r,n){return e.map(function(e,t){return St(St({},e),{},{__position:n*r+t+1})})}function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Pt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==wt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===wt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):jt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Rt(e,t){return t?e.map(function(e){return Pt(Pt({},e),{},{__queryID:t})}):e}function Ft(e){return e!==Object(e)}function xt(e,t){if(e===t)return 1;if(Ft(e)||Ft(t)||"function"==typeof e||"function"==typeof t)return e===t;if(Object.keys(e).length===Object.keys(t).length){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(!(i in t))return;if(!xt(e[i],t[i]))return}return 1}}function b(e){return"number"==typeof e&&isFinite(e)}function Et(e,t){t(e),e.getWidgets().forEach(function(e){rt(e)&&Et(e,t)})}function It(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})}function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Tt=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function _t(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function a(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==At(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===At(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):_t(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Dt(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Nt(e,t){return e.setQueryParameters({hierarchicalFacets:t.hierarchicalFacets.reduce(function(e,t){var r=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}(e,function(e){return e.name===t.name});return-1===r?e.concat(t):((e=e.slice()).splice(r,1,t),e)},e.hierarchicalFacets)})}var kt=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t){r=t;var e=e.setQueryParameters({hierarchicalFacetsRefinements:a(a({},e.hierarchicalFacetsRefinements),r.hierarchicalFacetsRefinements)}),r=Nt(e,t),e=t.tagRefinements.reduce(function(e,t){return e.addTagRefinement(t)},r),e=(r=t,e.setQueryParameters({numericRefinements:a(a({},e.numericRefinements),r.numericRefinements)})),e=(r=t,e.setQueryParameters({disjunctiveFacetsRefinements:a(a({},e.disjunctiveFacetsRefinements),r.disjunctiveFacetsRefinements)})),e=(r=t,e.setQueryParameters({facetsExcludes:a(a({},e.facetsExcludes),r.facetsExcludes)})),e=(r=t,e.setQueryParameters({facetsRefinements:a(a({},e.facetsRefinements),r.facetsRefinements)})),r=function(e,t){t=It([].concat(e.ruleContexts).concat(t.ruleContexts).filter(Boolean));return 0<t.length?e.setQueryParameters({ruleContexts:t}):e}(t.disjunctiveFacets.reduce(function(e,t){return e.addDisjunctiveFacet(t)},e),t),e=t.facets.reduce(function(e,t){return e.addFacet(t)},r),r=t;return r.facets,r.disjunctiveFacets,r.facetsRefinements,r.facetsExcludes,r.disjunctiveFacetsRefinements,r.numericRefinements,r.tagRefinements,r.hierarchicalFacets,r.hierarchicalFacetsRefinements,r.ruleContexts,r=Dt(r,Tt),e.setQueryParameters(r)})};function Ht(e){return function(e){if(Array.isArray(e))return Wt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Wt(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wt(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ct(e){var t=e.start,r=void 0===t?0:t,t=e.end,e=e.step,e=void 0===e?1:e,n=0===e?1:e,e=Math.round((t-r)/n);return Ht(Array(e)).map(function(e,t){return r+t*n})}function Lt(e,t,r){var n=t.getHelper();return{uiState:r,helper:n,parent:t,instantSearchInstance:e,state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function Mt(e,t){var r=t.getResults(),n=t.getHelper();return{helper:n,parent:t,instantSearchInstance:e,results:r,scopedResults:t.getScopedResults(),state:r?r._state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function $t(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Ut(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ut(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Qt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Bt(r){return r.some(function(e){return e.isHighlighted})?r.map(function(e,t){return $t($t({},e),{},{isHighlighted:!pt(r,t)})}):r.map(function(e){return $t($t({},e),{},{isHighlighted:!1})})}function qt(e,t){t=(1<arguments.length&&void 0!==t?t:{fallback:function(){}}).fallback;return"undefined"==typeof window?t():e({window:window})}function Vt(e){return Array.isArray(e)?e:[e]}function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(r),!0).forEach(function(e){Xt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Xt(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Jt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Jt(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt=i({name:"configure",connector:!0});function Gt(e,t){return e.setQueryParameters(Object.keys(t.searchParameters).reduce(function(e,t){return c(c({},e),{},Xt({},t,void 0))},{}))}var Zt=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:v,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return function(n){var t;if(n&&Ne(n.searchParameters))return t={},{$$type:"ais.configure",init:function(e){var t=e.instantSearchInstance;r(c(c({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(c(c({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),Gt(e,n)},getRenderState:function(e,t){t=this.getWidgetRenderState(t);return c(c({},e),{},{configure:c(c({},t),{},{widgetParams:c(c({},t.widgetParams),{},{searchParameters:kt(new y.SearchParameters(null==(e=e.configure)?void 0:e.widgetParams.searchParameters),new y.SearchParameters(t.widgetParams.searchParameters)).getQueryParams()})})})},getWidgetRenderState:function(e){var r,e=e.helper;return t.refine||(t.refine=(r=e,function(e){var t=Gt(r.state,n),t=kt(t,new y.SearchParameters(e));n.searchParameters=e,r.setState(t).search()})),{refine:t.refine,widgetParams:n}},getWidgetSearchParameters:function(e,t){t=t.uiState;return kt(e,new y.SearchParameters(c(c({},t.configure),n.searchParameters)))},getWidgetUiState:function(e){return c(c({},e),{},{configure:c(c({},e.configure),n.searchParameters)})}};throw new Error(Kt("The `searchParameters` option expects an object."))}};function Yt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function er(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Yt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?ir(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ir(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ar=Object.prototype.hasOwnProperty;function or(e,t,r){if(null!=r&&r(e,t))return!0;var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&or(e[i],t[i],r););return-1===i}if(!n||"object"===tr(e)){for(n in i=0,e){if(ar.call(e,n)&&++i&&!ar.call(t,n))return!1;if(!(n in t&&or(e[n],t[n],r)))return!1}return Object.keys(t).length===i}}return e!=e&&t!=t}function cr(e){var t;return new y.SearchResults(e,[{query:null!=(t=e.query)?t:"",page:null!=(t=e.page)?t:0,hitsPerPage:null!=(t=e.hitsPerPage)?t:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:e.index}],{__isArtificial:!0})}function sr(r){var e=r.getHelper(),n=r.getResults()||cr(e.state),e=r.getScopedResults().map(function(e){var t=e.indexId===r.getIndexId()?n:cr(e.helper.state);return er(er({},e),{},{results:e.results||t})});return{results:n,scopedResults:e}}function ur(e){if(!e)throw new Error("Invariant failed")}var fr=g.createContext(null);function lr(){var e=g.useContext(fr);return ur(null!==e),e}var hr=g.createContext(null);function dr(){var e=g.useContext(hr);return ur(null!==e),e}var pr=g.createContext(null);function mr(){return g.useContext(pr)}function gr(e){var t=nr(g.useState(function(){return e}),2),r=t[0],t=t[1];return or(r,e)||t(e),r}var yr=g.use,vr="undefined"!=typeof window?g.useLayoutEffect:g.useEffect,br=g.createContext(null);function Sr(){return g.useContext(br)}function Or(e){var t=e.widget,r=e.parentIndex,n=e.props,e=e.shouldSsr,i=Sr(),a=g.useRef(n),o=(g.useEffect(function(){a.current=n},[n]),g.useRef(t)),c=(g.useEffect(function(){o.current=t},[t]),g.useRef(null)),s=e&&!r.getWidgets().includes(t),u=dr();vr(function(){var e=o.current;return c.current?(clearTimeout(c.current),or(n,a.current)||(r.removeWidgets([e]),r.addWidgets([t]))):s||r.addWidgets([t]),function(){c.current=setTimeout(function(){u._schedule(function(){u._preventWidgetCleanup||r.removeWidgets([e])})})}},[r,t,s,u,n]),!s&&"pending"!==(null==i||null==(e=i.current)?void 0:e.status)||r.addWidgets([t]),"undefined"==typeof window&&null!=i&&i.current&&"ais.index"!==t.$$type&&(yr(i.current),"ais.dynamicWidgets"!==t.$$type)&&null!=(e=u.helper)&&e.lastResults&&yr(i.current)}var wr=["instantSearchInstance","widgetParams"],jr=["widgetParams"];function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=mr(),i=dr(),a=lr(),o=gr(t),c=gr(r),s=g.useRef(!0),u=g.useRef(null),f=g.useRef(i.status),l=g.useMemo(function(){return er(er({},e(function(e,t){t?s.current=!0:s.current&&(t=e.instantSearchInstance,e.widgetParams,or(e=rr(e,wr),u.current,function(e,t){return(null==e?void 0:e.constructor)===Function&&(null==t?void 0:t.constructor)===Function})&&t.status===f.current||(h(e),u.current=e,f.current=t.status))},function(){s.current=!1})(o)),c)},[e,o,c]),t=nr(g.useState(function(){var e,t,r;return l.getWidgetRenderState?(e=a.getHelper(),r=a.getWidgetUiState({})[a.getIndexId()],e.state=(null==(t=l.getWidgetSearchParameters)?void 0:t.call(l,e.state,{uiState:r}))||e.state,r=(t=sr(a)).results,t=t.scopedResults,(r=l.getWidgetRenderState({helper:e,parent:a,instantSearchInstance:i,results:r,scopedResults:t,state:e.state,renderState:i.renderState,templatesConfig:i.templatesConfig,createURL:a.createURL,searchMetadata:{isSearchStalled:"stalled"===i.status},status:i.status,error:i.error})).widgetParams,rr(r,jr)):{}}),2),r=t[0],h=t[1];return Or({widget:l,parentIndex:a,props:o,shouldSsr:Boolean(n)}),r}function Pr(e,t){return l(Zt,{searchParameters:e},t)}function Rr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Fr(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Rr(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==xr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===xr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Rr(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Er=i({name:"dynamic-widgets",connector:!0}),Ir=function(u){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(u,Er()),function(r){var c,e=r.widgets,t=r.maxValuesPerFacet,n=void 0===t?20:t,t=r.facets,i=void 0===t?["*"]:t,t=r.transformItems,a=void 0===t?function(e){return e}:t,s=r.fallbackWidget;if(!(e&&Array.isArray(e)&&e.every(function(e){return"object"===xr(e)})))throw new Error(Er("The `widgets` option expects an array of widgets."));if(Array.isArray(i)&&i.length<=1&&("*"===i[0]||void 0===i[0]))return c=new Map,{$$type:"ais.dynamicWidgets",init:function(r){e.forEach(function(e){var t=function(e,t){var r=null==(r=e.getWidgetRenderState)?void 0:r.call(e,t),t=null;if(r&&r.widgetParams&&((r=r.widgetParams).attribute?t=r.attribute:Array.isArray(r.attributes)&&(t=r.attributes[0])),"string"!=typeof t)throw new Error("Could not find the attribute of the widget:\n\n".concat(JSON.stringify(e),"\n\nPlease check whether the widget's getWidgetRenderState returns widgetParams.attribute correctly."));return t}(e,r);c.set(t,{widget:e,isMounted:!1})}),u(Fr(Fr({},this.getWidgetRenderState(r)),{},{instantSearchInstance:r.instantSearchInstance}),!0)},render:function(e){var t=e.parent,i=this.getWidgetRenderState(e),a=[],o=[];s&&i.attributesToRender.forEach(function(e){var t;c.has(e)||(t=s({attribute:e}),c.set(e,{widget:t,isMounted:!1}))}),c.forEach(function(e,t){var r=e.widget,e=e.isMounted,n=-1<i.attributesToRender.indexOf(t);!e&&n?(o.push(r),c.set(t,{widget:r,isMounted:!0})):e&&!n&&(a.push(r),c.set(t,{widget:r,isMounted:!1}))}),t.addWidgets(o),setTimeout(function(){return t.removeWidgets(a)},0),u(Fr(Fr({},i),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(e){var e=e.parent,r=[];c.forEach(function(e){var t=e.widget;e.isMounted&&r.push(t)}),e.removeWidgets(r),o()},getWidgetSearchParameters:function(e){return i.reduce(function(e,t){return e.addFacet(t)},e.setQueryParameters({maxValuesPerFacet:Math.max(n||0,e.maxValuesPerFacet||0)}))},getRenderState:function(e,t){return Fr(Fr({},e),{},{dynamicWidgets:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results;e.state;if(!t)return{attributesToRender:[],widgetParams:r};e=a(null!=(e=null==(e=t.renderingContent)||null==(e=e.facetOrdering)||null==(e=e.facets)?void 0:e.order)?e:[],{results:t});if(Array.isArray(e))return{attributesToRender:e,widgetParams:r};throw new Error(Er("The `transformItems` option expects a function that returns an Array."))}};throw new Error(Er('The `facets` option only accepts [] or ["*"], you passed '.concat(JSON.stringify(i))))}};function Ar(e,t){return l(Ir,er(er({},e),{},{widgets:[]}),t)}var Tr=["children","fallbackComponent"];function _r(){return null}function Dr(e){return"object"===tr(e)&&e.props}function Nr(e){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var kr=["initialSearchParameters"];function Hr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hr(Object(r),!0).forEach(function(e){Wr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Wr(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Nr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Nr(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cr(e){return function(e){if(Array.isArray(e))return Lr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Lr(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lr(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mr(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var Ur=i({name:"index-widget"});function Qr(e,t){var r=t.state,n=t.isPageReset,t=t._uiState;r!==e.state&&(e.state=r,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:n,_uiState:t}))}function $r(e,r,t){return e.reduce(function(e,t){return!rt(t)&&(t.getWidgetUiState||t.getWidgetState)?t.getWidgetUiState?t.getWidgetUiState(e,r):t.getWidgetState(e,r):e},2<arguments.length&&void 0!==t?t:{})}function Br(e,t){var r=t.initialSearchParameters,n=Mr(t,kr);return e.filter(function(e){return!rt(e)}).reduce(function(e,t){return t.getWidgetSearchParameters?t.getWidgetSearchParameters(e,n):e},r)}var qr=function(e){if(void 0===e||void 0===e.indexName)throw new Error(Ur("The `indexName` option is required."));var o=e.indexName,e=e.indexId,c=void 0===e?o:e,s=[],u={},f=null,l=null,h=null,d=null,p=null;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return o},getIndexId:function(){return c},getHelper:function(){return h},getResults:function(){var e;return null!=(e=d)&&e.lastResults?(d.lastResults._state=h.state,d.lastResults):null},getPreviousState:function(){return p},getScopedResults:function(){var e=this.getParent();return function r(e){return e.filter(rt).reduce(function(e,t){return e.concat.apply(e,[{indexId:t.getIndexId(),results:t.getResults(),helper:t.getHelper()}].concat(Cr(r(t.getWidgets()))))},[])}(e?e.getWidgets():[this])},getParent:function(){return l},createURL:function(e){return"function"==typeof e?f._createURL(Wr({},c,e(u))):f._createURL(Wr({},c,$r(s,{searchParameters:e,helper:h})))},getWidgets:function(){return s},addWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(Ur("The `addWidgets` method expects an array of widgets."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(Ur("The widget definition expects a `render` and/or an `init` method."));return s=s.concat(e),f&&Boolean(e.length)&&(Qr(h,{state:Br(s,{uiState:u,initialSearchParameters:h.state}),_uiState:u}),e.forEach(function(e){e.getRenderState&&Vr({renderState:e.getRenderState(f.renderState[t.getIndexId()]||{},Lt(f,t,f._initialUiState)),instantSearchInstance:f,parent:t})}),e.forEach(function(e){e.init&&e.init(Lt(f,t,f._initialUiState))}),f.scheduleSearch()),this},removeWidgets:function(t){var e,r=this;if(!Array.isArray(t))throw new Error(Ur("The `removeWidgets` method expects an array of widgets."));if(t.some(function(e){return"function"!=typeof e.dispose}))throw new Error(Ur("The widget definition expects a `dispose` method."));return s=s.filter(function(e){return-1===t.indexOf(e)}),f&&Boolean(t.length)&&(e=t.reduce(function(e,t){return t.dispose({helper:h,state:e,parent:r})||e},h.state),u=$r(s,{searchParameters:e,helper:h}),h.setState(Br(s,{uiState:u,initialSearchParameters:e})),s.length)&&f.scheduleSearch(),this},init:function(e){var i,t=this,r=e.instantSearchInstance,n=e.parent,a=e.uiState;null===h&&(f=r,l=n,u=a[c]||{},i=r.mainHelper,e=Br(s,{uiState:u,initialSearchParameters:new y.SearchParameters({index:o})}),(h=y({},e.index,e)).search=function(){return r.onStateChange?(r.onStateChange({uiState:r.mainIndex.getWidgetUiState({}),setUiState:function(e){return r.setUiState(e,!1)}}),i):i.search()},h.searchWithoutTriggeringOnStateChange=function(){return i.search()},h.searchForFacetValues=function(e,t,r,n){n=h.state.setQueryParameters(n);return i.searchForFacetValues(e,t,r,n)},d=i.derive(function(){return kt.apply(void 0,Cr(function(e){for(var t=e.getParent(),r=[e.getHelper().state];null!==t;)r=[t.getHelper().state].concat(r),t=t.getParent();return r}(t)))}),(e=null==(n=r._initialResults)?void 0:n[this.getIndexId()])&&(n=new y.SearchResults(new y.SearchParameters(e.state),e.results),d.lastResults=n,h.lastResults=n),h.on("change",function(e){e.isPageReset&&!function r(e){e=e.filter(rt);0!==e.length&&e.forEach(function(e){var t=e.getHelper();Qr(t,{state:t.state.resetPage(),isPageReset:!0}),r(e.getWidgets())})}(s)}),d.on("search",function(){r.scheduleStalledRender()}),d.on("result",function(e){e=e.results;r.scheduleRender(),h.lastResults=e,p=null==e?void 0:e._state}),s.forEach(function(e){e.getRenderState&&Vr({renderState:e.getRenderState(r.renderState[t.getIndexId()]||{},Lt(r,t,a)),instantSearchInstance:r,parent:t})}),s.forEach(function(e){e.init&&e.init(Lt(r,t,a))}),h.on("change",function(e){var t=e.state,e=e._uiState;u=$r(s,{searchParameters:t,helper:h},e||{}),r.onStateChange||r.onInternalStateChange()}),e)&&r.scheduleRender()},render:function(e){var t=this,r=e.instantSearchInstance,e=("error"===r.status&&!r.mainHelper.hasPendingRequests()&&p&&h.setState(p),this.getResults()?s:s.filter(rt));e.forEach(function(e){e.getRenderState&&Vr({renderState:e.getRenderState(r.renderState[t.getIndexId()]||{},Mt(r,t)),instantSearchInstance:r,parent:t})}),e.forEach(function(e){e.render&&e.render(Mt(r,t))})},dispose:function(){var e,t=this;s.forEach(function(e){e.dispose&&e.dispose({helper:h,state:h.state,parent:t})}),(l=f=null)!=(e=h)&&e.removeAllListeners(),(h=null)!=(e=d)&&e.detach(),d=null},getWidgetUiState:function(e){return s.filter(rt).reduce(function(e,t){return t.getWidgetUiState(e)},S(S({},e),{},Wr({},c,S(S({},e[c]),u))))},getWidgetState:function(e){return this.getWidgetUiState(e)},getWidgetSearchParameters:function(e,t){t=t.uiState;return Br(s,{uiState:t,initialSearchParameters:e})},refreshUiState:function(){u=$r(s,{searchParameters:this.getHelper().state,helper:this.getHelper()},u)},setIndexUiState:function(e){var t="function"==typeof e?e(u):e;f.setUiState(function(e){return S(S({},e),{},Wr({},c,t))})}}};function Vr(e){var t=e.renderState,r=e.instantSearchInstance,e=e.parent,e=(e||r.mainIndex).getIndexId();r.renderState=S(S({},r.renderState),{},Wr({},e,S(S({},r.renderState[e]),t)))}function Jr(){return nr(g.useReducer(function(e){return e+1},0),2)[1]}var zr=g.createContext(null);function Xr(){return g.useContext(zr)}var Kr=["children"];function Gr(r){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.descendantName,e=e.modifierName,t=t?"-".concat(t):"",e=e?"--".concat(e):"";return"".concat("ais","-").concat(r).concat(t).concat(e)}}var Zr=Gr("Highlight");var Yr=Gr("ReverseHighlight");var en=Gr("Snippet");var tn=Gr("ReverseSnippet");function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){var r,e={method:e,payload:t},t=e.method;if("object"!==rn(e=e.payload))throw new Error("The insights helper expects the payload to be an object.");try{r=Xe(e)}catch(e){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(t,'" data-insights-payload="').concat(r,'"')}function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var on="_ALGOLIA";function cn(){var e=on;if("object"===("undefined"==typeof document?"undefined":an(document))&&"string"==typeof document.cookie)for(var t="".concat(e,"="),r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}}function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function fn(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?un(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==sn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==sn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===sn(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):un(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||dn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(e){return function(e){if(Array.isArray(e))return pn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){var r;if(e)return"string"==typeof e?pn(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pn(e,t):void 0}function pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mn="2.6.0",gn="https://cdn.jsdelivr.net/npm/search-insights@".concat(mn,"/dist/search-insights.min.js");function yn(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.insightsClient,l=e.insightsInitParams,h=e.onEvent,e=e.$$internal,d=void 0!==e&&e,r=t,p=(t||null===t||qt(function(e){var n=e.window,i=n.AlgoliaAnalyticsObject||"aa";(r="string"==typeof i?n[i]:r)||(n.AlgoliaAnalyticsObject=i,n[i]||(n[i]=function(){n[i].queue||(n[i].queue=[]);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n[i].queue.push(t)},n[i].version=mn,n[i].shouldAddScript=!0),r=n[i])}),r||v);return function(e){var n=e.instantSearchInstance,e=n.middleware.filter(function(e){return"ais.insights"===e.instance.$$type&&e.instance.$$internal}).map(function(e){return e.creator});n.unuse.apply(n,hn(e));var t,r,i,a,o=ln((e=n.client).transporter?(o=(r=e.transporter).headers,r=r.queryParameters,[o[t="x-algolia-application-id"]||r[t],o[t="x-algolia-api-key"]||r[t]]):[e.applicationID,e.apiKey],2),c=o[0],s=o[1],u=void 0,f=void 0;return Array.isArray(p.queue)&&(r=ct(p.queue.slice().reverse(),function(e){return"setUserToken"===ln(e,1)[0]})||[],u=ln(r,2)[1]),p("getUserToken",null,function(e,t){f=t}),!l&&vn(p)||p("init",fn({appId:c,apiKey:s,partial:!0},l)),{$$type:"ais.insights",$$internal:d,onStateChange:function(){},subscribe:function(){if(p.shouldAddScript){var t="[insights middleware]: could not load search-insights.js. Please load it manually following https://alg.li/insights-init";try{var e=document.createElement("script");e.async=!0,e.src=gn,e.onerror=function(){n.emit("error",new Error(t))},document.body.appendChild(e),p.shouldAddScript=!1}catch(e){p.shouldAddScript=!1,n.emit("error",new Error(t))}}},started:function(){p("addAlgoliaAgent","insights-middleware"),a=n.helper,i={userToken:a.state.userToken,clickAnalytics:a.state.clickAnalytics},a.overrideStateWithoutTriggeringChangeEvent(fn(fn({},a.state),{},{clickAnalytics:!0})),d||n.scheduleSearch();function e(e){var t;function r(){a.overrideStateWithoutTriggeringChangeEvent(fn(fn({},a.state),{},{userToken:e})),t&&t!==e&&n.scheduleSearch()}e&&(t=a.state.userToken,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?r():setTimeout(r,0))}var t=cn(),r=(t&&e(t,!0),f?(e(f,!0),p("setUserToken",f)):u&&(e(u,!0),p("setUserToken",u)),p("onUserTokenChange",e,{immediate:!0}),p);vn(p)&&(r=function(e,t){return p(e,t,{headers:{"X-Algolia-Application-Id":c,"X-Algolia-API-Key":s}})}),n.sendEventToInsights=function(e){h?h(e,r):e.insightsMethod&&(e.payload.algoliaSource=["instantsearch"],"internal"===e.eventModifier&&e.payload.algoliaSource.push("instantsearch-internal"),r(e.insightsMethod,e.payload))}},unsubscribe:function(){p("onUserTokenChange",void 0),n.sendEventToInsights=v,a&&i&&(a.overrideStateWithoutTriggeringChangeEvent(fn(fn({},a.state),i)),n.scheduleSearch())}}}}function vn(e){var e=ln((e.version||"").split(".").map(Number),2),t=e[0],e=e[1];return 3<=t||2===t&&6<=e||1===t&&10<=e}function bn(e){var e=(0<arguments.length&&void 0!==e?e:{}).$$internal,a=void 0!==e&&e;return function(e){var t=e.instantSearchInstance,r={widgets:[]},n=document.createElement("meta"),i=document.querySelector("head");return n.name="instantsearch:widgets",{$$type:"ais.metadata",$$internal:a,onStateChange:function(){},subscribe:function(){setTimeout(function(){var e=t.client;r.ua=e.transporter&&e.transporter.userAgent?e.transporter.userAgent.value:e._ua,function n(e,i,a){var o=Lt(i,i.mainIndex,i._initialUiState);e.forEach(function(e){var t={},r=(e.getWidgetRenderState&&(r=e.getWidgetRenderState(o))&&r.widgetParams&&(t=r.widgetParams),Object.keys(t).filter(function(e){return void 0!==t[e]}));a.widgets.push({type:e.$$type,widgetType:e.$$widgetType,params:r}),"ais.index"===e.$$type&&n(e.getWidgets(),i,a)})}(t.mainIndex.getWidgets(),t,r),t.middleware.forEach(function(e){return r.widgets.push({middleware:!0,type:e.instance.$$type,internal:e.instance.$$internal})}),n.content=JSON.stringify(r),i.appendChild(n)},0)},started:function(){},unsubscribe:function(){n.remove()}}}}function Sn(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}function On(e,t,r,n,i,a,o,c,s,u,f,l,h,d){var p=e;if("function"==typeof o?p=o(t,p):p instanceof Date?p=u(p):"comma"===r&&An(p)&&(p=xn.maybeMap(p,function(e){return e instanceof Date?u(e):e})),null===p){if(n)return a&&!h?a(t,j.encoder,d,"key",f):t;p=""}if(kn(p)||xn.isBuffer(p)){if(a){e=h?t:a(t,j.encoder,d,"key",f);if("comma"===r&&h){for(var m=Tn.call(String(p),","),g="",y=0;y<m.length;++y)g+=(0===y?"":",")+l(a(m[y],j.encoder,d,"value",f));return[l(e)+"="+g]}return[l(e)+"="+l(a(p,j.encoder,d,"value",f))]}return[l(t)+"="+l(String(p))]}var v,b=[];if(void 0!==p){v="comma"===r&&An(p)?[{value:0<p.length?p.join(",")||null:void 0}]:An(o)?o:(e=Object.keys(p),c?e.sort(c):e);for(var S=0;S<v.length;++S){var O=v[S],w="object"==typeof O&&void 0!==O.value?O.value:p[O];i&&null===w||(O=An(p)?"function"==typeof r?r(t,O):t:t+(s?"."+O:"["+O+"]"),Dn(b,On(w,O,r,n,i,a,o,c,s,u,f,l,h,d)))}}return b}var wn=String.prototype.replace,jn=/%20/g,U="RFC3986",Pn={default:U,formatters:{RFC1738:function(e){return wn.call(e,jn,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:U},Rn=Object.prototype.hasOwnProperty,Fn=Array.isArray,d=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),xn={arrayToObject:Sn,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],o=Object.keys(a),c=0;c<o.length;++c){var s=o[c],u=a[s];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:s}),r.push(u))}for(var f=t;1<f.length;){var l=f.pop(),h=l.obj[l.prop];if(Fn(h)){for(var d=[],p=0;p<h.length;++p)void 0!==h[p]&&d.push(h[p]);l.obj[l.prop]=d}}return e},decode:function(t,e,r){t=t.replace(/\+/g," ");if("iso-8859-1"===r)return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch(e){return t}},encode:function(e,t,r,n,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",c=0;c<a.length;++c){var s=a.charCodeAt(c);45===s||46===s||95===s||126===s||48<=s&&s<=57||65<=s&&s<=90||97<=s&&s<=122||i===Pn.RFC1738&&(40===s||41===s)?o+=a.charAt(c):s<128?o+=d[s]:s<2048?o+=d[192|s>>6]+d[128|63&s]:s<55296||57344<=s?o+=d[224|s>>12]+d[128|s>>6&63]+d[128|63&s]:(c+=1,s=65536+((1023&s)<<10|1023&a.charCodeAt(c)),o+=d[240|s>>18]+d[128|s>>12&63]+d[128|s>>6&63]+d[128|63&s])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(Fn(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function n(i,a,o){if(!a)return i;if("object"!=typeof a){if(Fn(i))i.push(a);else{if(!i||"object"!=typeof i)return[i,a];(o&&(o.plainObjects||o.allowPrototypes)||!Rn.call(Object.prototype,a))&&(i[a]=!0)}return i}var e;return i&&"object"==typeof i?(Fn(e=i)&&!Fn(a)&&(e=Sn(i,o)),Fn(i)&&Fn(a)?(a.forEach(function(e,t){var r;Rn.call(i,t)?(r=i[t])&&"object"==typeof r&&e&&"object"==typeof e?i[t]=n(r,e,o):i.push(e):i[t]=e}),i):Object.keys(a).reduce(function(e,t){var r=a[t];return Rn.call(e,t)?e[t]=n(e[t],r,o):e[t]=r,e},e)):[i].concat(a)}},En=Object.prototype.hasOwnProperty,In={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},An=Array.isArray,Tn=String.prototype.split,_n=Array.prototype.push,Dn=function(e,t){_n.apply(e,An(t)?t:[t])},Nn=Date.prototype.toISOString,q=Pn.default,j={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:xn.encode,encodeValuesOnly:!1,format:q,formatter:Pn.formatters[q],indices:!1,serializeDate:function(e){return Nn.call(e)},skipNulls:!1,strictNullHandling:!1},kn=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e},Hn=Object.prototype.hasOwnProperty,Wn=Array.isArray,p={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:xn.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Cn=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Ln=function(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e},Mn="utf8=%26%2310003%3B",Un="utf8=%E2%9C%93",Qn=function(e,t,r,n){for(var i=n?t:Ln(t,r),a=e.length-1;0<=a;--a){var o,c,s,u=e[a];"[]"===u&&r.parseArrays?o=[].concat(i):(o=r.plainObjects?Object.create(null):{},c="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,s=parseInt(c,10),r.parseArrays||""!==c?!isNaN(s)&&u!==c&&String(s)===c&&0<=s&&r.parseArrays&&s<=r.arrayLimit?(o=[])[s]=i:"__proto__"!==c&&(o[c]=i):o={0:i}),i=o}return i},$n={formats:Pn,parse:function(e,t){var r=function(e){if(!e)return p;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?p:e).charset;return{allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:p).allowPrototypes,arrayLimit:("number"==typeof e.arrayLimit?e:p).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:p).charsetSentinel,comma:("boolean"==typeof e.comma?e:p).comma,decoder:("function"==typeof e.decoder?e:p).decoder,delimiter:("string"==typeof e.delimiter||xn.isRegExp(e.delimiter)?e:p).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:p.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:p).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:p).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:p).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:p).strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){var r,n,i,a,o={},e=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,s=e.split(t.delimiter,c),u=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<s.length;++r)0===s[r].indexOf("utf8=")&&(s[r]===Un?f="utf-8":s[r]===Mn&&(f="iso-8859-1"),u=r,r=s.length);for(r=0;r<s.length;++r)r!==u&&((a=-1===(a=-1===(a=(n=s[r]).indexOf("]="))?n.indexOf("="):a+1)?(i=t.decoder(n,p.decoder,f,"key"),t.strictNullHandling?null:""):(i=t.decoder(n.slice(0,a),p.decoder,f,"key"),xn.maybeMap(Ln(n.slice(a+1),t),function(e){return t.decoder(e,p.decoder,f,"value")})))&&t.interpretNumericEntities&&"iso-8859-1"===f&&(a=Cn(a)),-1<n.indexOf("[]=")&&(a=Wn(a)?[a]:a),Hn.call(o,i)?o[i]=xn.combine(o[i],a):o[i]=a);return o}(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o)var c=a[o],c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=0<r.depth&&/(\[[^[\]]*])/.exec(i),e=o?i.slice(0,o.index):i,c=[];if(e){if(!r.plainObjects&&Hn.call(Object.prototype,e)&&!r.allowPrototypes)return;c.push(e)}for(var s=0;0<r.depth&&null!==(o=a.exec(i))&&s<r.depth;){if(s+=1,!r.plainObjects&&Hn.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+i.slice(o.index)+"]"),Qn(c,t,r,n)}}(c,n[c],r,"string"==typeof e),i=xn.merge(i,c,r);return xn.compact(i)},stringify:function(e,t){var r=e,n=function(e){if(!e)return j;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||j.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Pn.default;if(void 0!==e.format){if(!En.call(Pn.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=Pn.formatters[r],i=j.filter;return"function"!=typeof e.filter&&!An(e.filter)||(i=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:j).addQueryPrefix,allowDots:void 0===e.allowDots?j.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:j).charsetSentinel,delimiter:(void 0===e.delimiter?j:e).delimiter,encode:("boolean"==typeof e.encode?e:j).encode,encoder:("function"==typeof e.encoder?e:j).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:j).encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:("function"==typeof e.serializeDate?e:j).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:j).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:j).strictNullHandling}}(t),i=("function"==typeof n.filter?r=(0,n.filter)("",r):An(n.filter)&&(o=n.filter),[]);if("object"!=typeof r||null===r)return"";var e=t&&t.arrayFormat in In?t.arrayFormat:!(t&&"indices"in t)||t.indices?"indices":"repeat",a=In[e],o=o||Object.keys(r);n.sort&&o.sort(n.sort);for(var c=0;c<o.length;++c){var s=o[c];n.skipNulls&&null===r[s]||Dn(i,On(r[s],s,a,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}t=i.join(n.delimiter),e=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?e+="utf8=%26%2310003%3B&":e+="utf8=%E2%9C%93&"),0<t.length?e+t:""}};function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vn(n.key),n)}}function O(e,t,r){(t=Vn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Vn(e){e=function(e,t){if("object"!==Bn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Bn(e)?e:String(e)}function Jn(e){e&&(window.document.title=e)}var zn=function(){function u(e){var r=this,t=e.windowTitle,n=e.writeDelay,n=void 0===n?400:n,i=e.createURL,a=e.parseURL,o=e.getLocation,c=e.start,s=e.dispose,e=e.push;if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");O(this,"$$type","ais.browser"),O(this,"windowTitle",void 0),O(this,"writeDelay",void 0),O(this,"_createURL",void 0),O(this,"parseURL",void 0),O(this,"getLocation",void 0),O(this,"writeTimer",void 0),O(this,"_onPopState",void 0),O(this,"inPopState",!1),O(this,"isDisposed",!1),O(this,"latestAcknowledgedHistory",0),O(this,"_start",void 0),O(this,"_dispose",void 0),O(this,"_push",void 0),this.windowTitle=t,this.writeTimer=void 0,this.writeDelay=n,this._createURL=i,this.parseURL=a,this.getLocation=o,this._start=c,this._dispose=s,this._push=e,qt(function(e){var e=e.window,t=r.windowTitle&&r.windowTitle(r.read());Jn(t),r.latestAcknowledgedHistory=e.history.length})}var e,t,r;return e=u,(t=[{key:"read",value:function(){return this.parseURL({qsModule:$n,location:this.getLocation()})}},{key:"write",value:function(i){var a=this;qt(function(e){var t=e.window,r=a.createURL(i),n=a.windowTitle&&a.windowTitle(i);a.writeTimer&&clearTimeout(a.writeTimer),a.writeTimer=setTimeout(function(){Jn(n),a.shouldWrite(r)&&(a._push?a._push(r):t.history.pushState(i,n||"",r),a.latestAcknowledgedHistory=t.history.length),a.inPopState=!1,a.writeTimer=void 0},a.writeDelay)})}},{key:"onUpdate",value:function(e){var t=this;this._start&&this._start(function(){e(t.read())}),this._onPopState=function(){t.writeTimer&&(clearTimeout(t.writeTimer),t.writeTimer=void 0),t.inPopState=!0,e(t.read())},qt(function(e){e.window.addEventListener("popstate",t._onPopState)})}},{key:"createURL",value:function(e){return this._createURL({qsModule:$n,routeState:e,location:this.getLocation()})}},{key:"dispose",value:function(){var t=this;this._dispose&&this._dispose(),this.isDisposed=!0,qt(function(e){e=e.window;t._onPopState&&e.removeEventListener("popstate",t._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this.write({})}},{key:"start",value:function(){this.isDisposed=!1}},{key:"shouldWrite",value:function(r){var n=this;return qt(function(e){var e=e.window,t=!(n.isDisposed&&n.latestAcknowledgedHistory!==e.history.length);return!n.inPopState&&t&&r!==e.location.href})}}])&&qn(e.prototype,t),r&&qn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}();function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kn=["configure"];function Gn(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Zn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gn(Object(r),!0).forEach(function(e){Yn(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Yn(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Xn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Xn(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ei(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function ti(e){e.configure;return ei(e,Kn)}function ri(e){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ii(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ni(Object(r),!0).forEach(function(e){ai(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ni(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ai(e,t,r){return(t=function(e){e=function(e,t){if("object"!==ri(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ri(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.router,i=void 0===t?function(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.createURL,r=e.parseURL,n=e.writeDelay,i=e.windowTitle,a=e.getLocation,o=e.start,c=e.dispose,e=e.push;return new zn({createURL:void 0===t?function(e){var t=e.qsModule,r=e.routeState,e=e.location,n=e.protocol,i=e.hostname,a=e.port,a=void 0===a?"":a,o=e.pathname,e=e.hash,t=t.stringify(r),r=""===a?"":":".concat(a);return(t?"".concat(n,"//").concat(i).concat(r).concat(o,"?").concat(t):"".concat(n,"//").concat(i).concat(r).concat(o)).concat(e)}:t,parseURL:void 0===r?function(e){var t=e.qsModule,e=e.location;return t.parse(e.search.slice(1),{arrayLimit:99})}:r,writeDelay:void 0===n?400:n,windowTitle:i,getLocation:void 0===a?function(){return qt(function(e){return e.window.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:a,start:o,dispose:c,push:e})}():t,a=void 0===(t=e.stateMapping)?{$$type:"ais.simple",stateToRoute:function(r){return Object.keys(r).reduce(function(e,t){return Zn(Zn({},e),{},Yn({},t,ti(r[t])))},{})},routeToState:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(r).reduce(function(e,t){return Zn(Zn({},e),{},Yn({},t,ti(r[t])))},{})}}:t,o=void 0!==(t=e.$$internal)&&t;return function(e){var t=e.instantSearchInstance;t._createURL=function(r){var e=0===t.mainIndex.getWidgets().length?t._initialUiState:t.mainIndex.getWidgetUiState({}),e=Object.keys(r).reduce(function(e,t){return ii(ii({},e),{},ai({},t,r[t]))},e),e=a.stateToRoute(e);return i.createURL(e)};var r=void 0,n=t._initialUiState;return{$$type:"ais.router({router:".concat(i.$$type||"__unknown__",", stateMapping:").concat(a.$$type||"__unknown__","})"),$$internal:o,onStateChange:function(e){e=e.uiState,e=a.stateToRoute(e);void 0!==r&&xt(r,e)||(i.write(e),r=e)},subscribe:function(){t._initialUiState=ii(ii({},n),a.routeToState(i.read())),i.onUpdate(function(e){0<t.mainIndex.getWidgets().length&&t.setUiState(a.routeToState(e))})},started:function(){var e;null!=(e=i.start)&&e.call(i)},unsubscribe:function(){i.dispose()}}}}function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function si(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ui(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?si(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==ci(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ci(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ci(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):si(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function fi(e){var r=e.numberLocale;return{formatNumber:function(e,t){return Number(t(e)).toLocaleString(r)},highlight:function(e,t){try{var r=JSON.parse(e);return t((n=ui(ui({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(mt(o._highlightResult,i)||{}).value)?"":o,o=Zr({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe highlight helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseHighlight:function(e,t){try{var r=JSON.parse(e);return t((n=ui(ui({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(mt(o._highlightResult,i)||{}).value)?"":o,o=Yr({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),Be(Bt(ht(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseHighlight helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},snippet:function(e,t){try{var r=JSON.parse(e);return t((n=ui(ui({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(mt(o._snippetResult,i)||{}).value)?"":o,o=en({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe snippet helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseSnippet:function(e,t){try{var r=JSON.parse(e);return t((n=ui(ui({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(mt(o._snippetResult,i)||{}).value)?"":o,o=tn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),Be(Bt(ht(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseSnippet helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},insights:function(e,t){try{var r=JSON.parse(e),n=r.method,i=r.payload;return t(nn(n,ui({objectIDs:[this.objectID]},i)))}catch(e){throw new Error('\nThe insights helper expects a JSON object of the format:\n{ "method": "method-name", "payload": { "eventName": "name of the event" } }')}}}}function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hi(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yi(n.key),n)}}function pi(e,t){return(pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mi(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=gi(r),t=(e=n?(e=gi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===li(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gi(e){return(gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){(t=yi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function yi(e){e=function(e,t){if("object"!==li(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==li(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===li(e)?e:String(e)}var R=i({name:"instantsearch"});function vi(){return"#"}var bi=function(){var e=h,t=W;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pi(e,t);var r,l=mi(h);function h(e){var r;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");P(w(r=l.call(this)),"client",void 0),P(w(r),"indexName",void 0),P(w(r),"insightsClient",void 0),P(w(r),"onStateChange",null),P(w(r),"helper",void 0),P(w(r),"mainHelper",void 0),P(w(r),"mainIndex",void 0),P(w(r),"started",void 0),P(w(r),"templatesConfig",void 0),P(w(r),"renderState",{}),P(w(r),"_stalledSearchDelay",void 0),P(w(r),"_searchStalledTimer",void 0),P(w(r),"_initialUiState",void 0),P(w(r),"_initialResults",void 0),P(w(r),"_createURL",void 0),P(w(r),"_searchFunction",void 0),P(w(r),"_mainHelperSearch",void 0),P(w(r),"middleware",[]),P(w(r),"sendEventToInsights",void 0),P(w(r),"status","idle"),P(w(r),"error",void 0),P(w(r),"scheduleSearch",at(function(){r.started&&r.mainHelper.search()})),P(w(r),"scheduleRender",at(function(){var e,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!=(e=r.mainHelper)&&e.hasPendingRequests()||(clearTimeout(r._searchStalledTimer),r._searchStalledTimer=null,t&&(r.status="idle",r.error=void 0)),r.mainIndex.render({instantSearchInstance:w(r)}),r.emit("render")})),P(w(r),"onInternalStateChange",at(function(){var t=r.mainIndex.getWidgetUiState({});r.middleware.forEach(function(e){e.instance.onStateChange({uiState:t})})})),r.setMaxListeners(100);var t=e.indexName,t=void 0===t?"":t,n=e.numberLocale,i=e.initialUiState,i=void 0===i?{}:i,a=e.routing,a=void 0===a?null:a,o=e.insights,o=void 0!==o&&o,c=e.searchFunction,s=e.stalledSearchDelay,s=void 0===s?200:s,u=e.searchClient,u=void 0===u?null:u,f=e.insightsClient,f=void 0===f?null:f,e=e.onStateChange,e=void 0===e?null:e;if(null===u)throw new Error(R("The `searchClient` option is required."));if("function"!=typeof u.search)throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if("function"==typeof u.addAlgoliaAgent&&u.addAlgoliaAgent("instantsearch.js (".concat("4.57.0",")")),f&&"function"!=typeof f)throw new Error(R("The `insightsClient` option should be a function."));return r.client=u,r.insightsClient=f,r.indexName=t,r.helper=null,r.mainHelper=null,r.mainIndex=qr({indexName:t}),r.onStateChange=e,r.started=!1,r.templatesConfig={helpers:fi({numberLocale:n}),compileOptions:{}},r._stalledSearchDelay=s,r._searchStalledTimer=null,r._createURL=vi,r._initialUiState=i,r._initialResults=null,c&&(r._searchFunction=c),r.sendEventToInsights=v,a&&((u="boolean"==typeof a?{}:a).$$internal=!0,r.use(oi(u))),o&&((f="boolean"==typeof o?{}:o).$$internal=!0,r.use(yn(f))),qt(function(e){return-1<(null==(e=e.window.navigator)||null==(e=e.userAgent)?void 0:e.indexOf("Algolia Crawler"))},{fallback:function(){return!1}})&&r.use(bn({$$internal:!0})),r}return e=h,(t=[{key:"_isSearchStalled",get:function(){return"stalled"===this.status}},{key:"use",value:function(){for(var r=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.map(function(e){var t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hi(Object(r),!0).forEach(function(e){P(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hi(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({$$type:"__unknown__",$$internal:!1,subscribe:v,started:v,unsubscribe:v,onStateChange:v},e({instantSearchInstance:r}));return r.middleware.push({creator:e,instance:t}),t});return this.started&&i.forEach(function(e){e.subscribe(),e.started()}),this}},{key:"unuse",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.middleware.filter(function(e){return t.includes(e.creator)}).forEach(function(e){return e.instance.unsubscribe()}),this.middleware=this.middleware.filter(function(e){return!t.includes(e.creator)}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(e){return this.addWidgets([e])}},{key:"addWidgets",value:function(e){if(!Array.isArray(e))throw new Error(R("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(R("The widget definition expects a `render` and/or an `init` method."));return this.mainIndex.addWidgets(e),this}},{key:"removeWidget",value:function(e){return this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){if(!Array.isArray(e))throw new Error(R("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));if(e.some(function(e){return"function"!=typeof e.dispose}))throw new Error(R("The widget definition expects a `dispose` method."));return this.mainIndex.removeWidgets(e),this}},{key:"start",value:function(){var n=this;if(this.started)throw new Error(R("The `start` method has already been called once."));var r,e,i=this.mainHelper||y(this.client,this.indexName);i.search=function(){return n.status="loading",n.scheduleRender(!1),i.searchOnlyWithDerivedHelpers()},this._searchFunction&&(r={search:function(){return new Promise(v)}},this._mainHelperSearch=i.search.bind(i),i.search=function(){var t=n.mainIndex.getHelper(),e=y(r,t.state.index,t.state);return e.once("search",function(e){e=e.state;t.overrideStateWithoutTriggeringChangeEvent(e),n._mainHelperSearch()}),e.on("change",function(e){e=e.state;t.setState(e)}),n._searchFunction(e),i}),i.on("error",function(e){var r,e=e.error;e instanceof Error||(r=e,e=Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},new Error(r.message))),e.error=e,n.error=e,n.status="error",n.scheduleRender(!1),n.emit("error",e)}),this.mainHelper=i,this.middleware.forEach(function(e){e.instance.subscribe()}),this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this._initialResults?(e=this.scheduleSearch,this.scheduleSearch=at(v),at(function(){n.scheduleSearch=e})()):0<this.mainIndex.getWidgets().length&&this.scheduleSearch(),this.helper=this.mainIndex.getHelper(),this.started=!0,this.middleware.forEach(function(e){e.instance.started()})}},{key:"dispose",value:function(){var e;this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),null!=(e=this.mainHelper)&&e.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(e){e.instance.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var e=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){e.status="stalled",e.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(e){var t=this,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!this.mainHelper)throw new Error(R("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var n="function"==typeof e?e(this.mainIndex.getWidgetUiState({})):e;this.onStateChange&&r?this.onStateChange({uiState:n,setUiState:function(e){nt("function"==typeof e?e(n):e,t.mainIndex),t.scheduleSearch(),t.onInternalStateChange()}}):(nt(n,this.mainIndex),this.scheduleSearch(),this.onInternalStateChange())}},{key:"getUiState",value:function(){return this.started&&this.mainIndex.refreshUiState(),this.mainIndex.getWidgetUiState({})}},{key:"createURL",value:function(){if(this.started)return this._createURL(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});throw new Error(R("The `start` method needs to be called before `createURL`."))}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(R("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}])&&di(e.prototype,t),r&&di(e,r),Object.defineProperty(e,"prototype",{writable:!1}),h}();function Si(e,t){return e(t={exports:{}},t.exports),t.exports}var Oi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},wi=s.useState,ji=s.useEffect,Pi=s.useLayoutEffect,Ri=s.useDebugValue;function Fi(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Oi(e,r)}catch(e){return 1}}var B="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=wi({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return Pi(function(){i.value=r,i.getSnapshot=t,Fi(i)&&a({inst:i})},[e,r,t]),ji(function(){return Fi(i)&&a({inst:i}),e(function(){Fi(i)&&a({inst:i})})},[e]),Ri(r),r},xi={useSyncExternalStore:void 0!==s.useSyncExternalStore?s.useSyncExternalStore:B},Ei=(Si(function(e,t){}).useSyncExternalStore,Si(function(e){e.exports=xi}).useSyncExternalStore),Ii=["react (".concat(g.version,")"),"react-instantsearch (".concat(H,")"),"react-instantsearch-core (".concat(H,")")],Ai="react-instantsearch-server (".concat(H,")"),Ti=function(e){return e?"next.js (".concat(e,")"):null};function _i(e){var t,r,n=Jr(),i=mr(),a=Xr(),o=Sr(),c=null==a?void 0:a.initialResults,s=g.useRef(e),o=i||c||o,u=g.useRef(null),a=(null===(u=a?a.ssrSearchRef:u).current&&((t=new bi(e))._schedule=function(e){t._schedule.queue.push(e),clearTimeout(t._schedule.timer),t._schedule.timer=setTimeout(function(){t._schedule.queue.forEach(function(e){e()}),t._schedule.queue=[]},0)},t._schedule.queue=[],o&&(t._initialResults=c||{}),Di(e.searchClient,[].concat(Ii,[i&&Ai,Ti("undefined"!=typeof window&&(null==(r=window.next)?void 0:r.version)||("undefined"==typeof process||null==(r=process.env)?void 0:r.NEXT_RUNTIME))])),o&&t.start(),i&&i.notifyServer({search:t}),e.routing,u.current=t),u.current),c=s.current,f=(c.indexName!==e.indexName&&(a.helper.setIndex(e.indexName||"").search(),s.current=e),c.searchClient!==e.searchClient&&(Di(e.searchClient,[].concat(Ii,[i&&Ai])),a.mainHelper.setClient(e.searchClient).search(),s.current=e),c.onStateChange!==e.onStateChange&&(a.onStateChange=e.onStateChange,s.current=e),c.searchFunction!==e.searchFunction&&(a._searchFunction=e.searchFunction,s.current=e),c.stalledSearchDelay!==e.stalledSearchDelay&&(a._stalledSearchDelay=null!=(r=e.stalledSearchDelay)?r:200,s.current=e),g.useRef(null));return Ei(g.useCallback(function(){var e=u.current;return null===f.current?e.started||(e.start(),n()):(clearTimeout(f.current),e._preventWidgetCleanup=!1),function(){clearTimeout(e._schedule.timer),f.current=setTimeout(function(){e.dispose()}),e._preventWidgetCleanup=!0}},[n]),function(){return u.current},function(){return u.current})}function Di(t,e){"function"==typeof t.addAlgoliaAgent&&e.filter(Boolean).forEach(function(e){t.addAlgoliaAgent(e)})}var Ni=["children"];var ki=["children"];function Hi(e){var t=e.children,e=rr(e,ki),r=s.useRef(null);return 0===Object.keys(e).length?s.createElement(s.Fragment,null,t):s.createElement(zr.Provider,{value:er(er({},e),{},{ssrSearchRef:r})},t)}function Wi(e){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ci(Object(r),!0).forEach(function(e){Li(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Li(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Wi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Wi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Wi(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?Ui(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ui(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qi(u){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v,l=(h(u,$i()),{});return function(o){var r,e=o||{},n=e.attributes,t=e.separator,i=void 0===t?" > ":t,t=e.rootPath,a=void 0===t?null:t,t=e.transformItems,c=void 0===t?function(e){return e}:t;if(n&&Array.isArray(n)&&0!==n.length)return r=Mi(n,1)[0],{$$type:"ais.breadcrumb",init:function(e){u(F(F({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){u(F(F({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(){f()},getRenderState:function(e,t){return F(F({},e),{},{breadcrumb:F(F({},e.breadcrumb),{},Li({},r,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r=this,n=e.helper,i=e.createURL,t=e.results,e=e.state;var a,e=t&&0!==e.hierarchicalFacets.length?(e=Mi(e.hierarchicalFacets,1)[0].name,e=(e=t.getFacetValues(e,{}))&&!Array.isArray(e)&&e.data?e.data:[],c((a=function r(e){return e.reduce(function(e,t){return e=t.isRefined&&(e.push({label:t.name,value:t.escapedValue}),Array.isArray(t.data))?e.concat(r(t.data)):e},[])}(e)).map(function(e,t){return{label:e.label,value:t+1===a.length?null:a[t+1].value}}),{results:t})):[];return l.createURL||(l.createURL=function(t){return i(function(e){return r.getWidgetUiState(e,{searchParameters:s(n.state,t),helper:n})})}),l.refine||(l.refine=function(e){n.setState(s(n.state,e)).search()}),{canRefine:0<e.length,createURL:l.createURL,items:e,refine:l.refine,widgetParams:o}},getWidgetUiState:function(e,t){t=t.searchParameters.getHierarchicalFacetBreadcrumb(r);return t.length?F(F({},e),{},{hierarchicalMenu:F(F({},e.hierarchicalMenu),{},Li({},r,t))}):e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[r];if(e.isConjunctiveFacet(r)||e.isDisjunctiveFacet(r))return e;e.isHierarchicalFacet(r)&&e.getHierarchicalFacetByName(r);e=e.removeHierarchicalFacet(r).addHierarchicalFacet({name:r,attributes:n,separator:i,rootPath:a});return t?e.addHierarchicalFacetRefinement(r,t.join(i)):e.setQueryParameters({hierarchicalFacetsRefinements:F(F({},e.hierarchicalFacetsRefinements),{},Li({},r,[]))})}};throw new Error($i("The `attributes` option expects an array of strings."));function s(e,t){return t?e.resetPage().toggleFacetRefinement(r,t):0===(t=e.getHierarchicalFacetBreadcrumb(r)).length?e:e.resetPage().toggleFacetRefinement(r,t[0])}}}var $i=i({name:"breadcrumb",connector:!0});function Bi(e){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qi(e){return function(e){if(Array.isArray(e))return Vi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Vi(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vi(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ji(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function zi(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ji(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Bi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Bi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Bi(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ji(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Xi(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(r,Ki()),function(n){var e=n||{},t=e.includedAttributes,c=void 0===t?[]:t,t=e.excludedAttributes,s=void 0===t?["query"]:t,t=e.transformItems,u=void 0===t?function(e){return e}:t;if(n&&n.includedAttributes&&n.excludedAttributes)throw new Error(Ki("The options `includedAttributes` and `excludedAttributes` cannot be used together."));function i(){return f.refine()}function a(){return f.createURL()}var f={refine:v,createURL:function(){return""},attributesToClear:[]};return{$$type:"ais.clearRefinements",init:function(e){var t=e.instantSearchInstance;r(zi(zi({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(zi(zi({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){o()},getRenderState:function(e,t){return zi(zi({},e),{},{clearRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.createURL,r=e.scopedResults,o=e.results,e=(f.attributesToClear=r.reduce(function(e,t){return e.concat((t=(e={scopedResult:t,includedAttributes:c,excludedAttributes:s,transformItems:u,results:o}).scopedResult,r=e.includedAttributes,n=e.excludedAttributes,i=e.transformItems,e=e.results,a=-1!==r.indexOf("query")||-1===n.indexOf("query"),{helper:t.helper,items:i(It(yt(t.results,t.helper.state,a).map(function(e){return e.attribute}).filter(function(e){return 0===r.length||-1!==r.indexOf(e)}).filter(function(e){return"query"===e&&a||-1===n.indexOf(e)})),{results:e})}));var r,n,i,a},[]),f.refine=function(){f.attributesToClear.forEach(function(e){var t=e.helper,e=e.items;t.setState(Fe({helper:t,attributesToClear:e})).search()})},f.createURL=function(){return t(kt.apply(void 0,qi(f.attributesToClear.map(function(e){return Fe({helper:e.helper,attributesToClear:e.items})}))))},f.attributesToClear.some(function(e){return 0<e.items.length}));return{canRefine:e,hasRefinements:e,refine:i,createURL:a,widgetParams:n}}}}}var Ki=i({name:"clear-refinements",connector:!0});function Gi(e){return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zi(e){return function(e){if(Array.isArray(e))return Yi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Yi(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yi(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ea(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ta(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ea(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Gi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Gi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Gi(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ea(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ra(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(r,na()),function(a){if((a||{}).includedAttributes&&(a||{}).excludedAttributes)throw new Error(na("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var e=a||{},o=e.includedAttributes,t=e.excludedAttributes,c=void 0===t?["query"]:t,t=e.transformItems,s=void 0===t?function(e){return e}:t;return{$$type:"ais.currentRefinements",init:function(e){var t=e.instantSearchInstance;r(ta(ta({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(ta(ta({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){n()},getRenderState:function(e,t){return ta(ta({},e),{},{currentRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var r=e.results,t=e.scopedResults,n=e.createURL,i=e.helper;e=r?t.reduce(function(e,t){return e.concat(s(ia({results:t.results,helper:t.helper,indexId:t.indexId,includedAttributes:o,excludedAttributes:c}),{results:r}))},[]):s(ia({results:{},helper:i,indexId:i.state.index,includedAttributes:o,excludedAttributes:c}),{results:r});return{items:e,canRefine:0<e.length,refine:function(e){return oa(i,e)},createURL:function(e){return n(aa(i.state,e))},widgetParams:a}}}}}var na=i({name:"current-refinements",connector:!0});function ia(e){var t=e.results,r=e.helper,n=e.indexId,i=e.includedAttributes,a=e.excludedAttributes,e=-1!==(i||[]).indexOf("query")||-1===(a||[]).indexOf("query"),o=i?function(e){return-1!==i.indexOf(e.attribute)}:function(e){return-1===a.indexOf(e.attribute)},c=yt(t,r.state,e).map(ca).filter(o);return c.reduce(function(e,t){return[].concat(Zi(e.filter(function(e){return e.attribute!==t.attribute})),[{indexName:r.state.index,indexId:n,attribute:t.attribute,label:t.attribute,refinements:c.filter(function(e){return e.attribute===t.attribute}).sort(function(e,t){return"numeric"===e.type?e.value-t.value:0}),refine:function(e){return oa(r,e)}}])},[])}function aa(e,t){switch(e=e.resetPage(),t.type){case"facet":return e.removeFacetRefinement(t.attribute,String(t.value));case"disjunctive":return e.removeDisjunctiveFacetRefinement(t.attribute,String(t.value));case"hierarchical":return e.removeHierarchicalFacetRefinement(t.attribute);case"exclude":return e.removeExcludeRefinement(t.attribute,String(t.value));case"numeric":return e.removeNumericRefinement(t.attribute,t.operator,String(t.value));case"tag":return e.removeTagRefinement(String(t.value));case"query":return e.setQueryParameter("query","");default:return e}}function oa(e,t){e.setState(aa(e.state,t)).search()}function ca(e){var t=function(e){if("numeric"===e.type)return Number(e.name);if("escapedValue"in e)return e.escapedValue;return e.name}(e),r=e.operator?"".concat(function(e){switch(e){case">=":return"â¥";case"<=":return"â¤";default:return e}}(e.operator)," ").concat(e.name):e.name,t={attribute:e.attribute,type:e.type,value:t,label:r};return void 0!==e.operator&&(t.operator=e.operator),void 0!==e.count&&(t.count=e.count),void 0!==e.exhaustive&&(t.exhaustive=e.exhaustive),t}function sa(e){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ua(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function fa(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ua(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==sa(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==sa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===sa(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ua(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}var la=i({name:"geo-search",connector:!0});function ha(e){return e.insideBoundingBox||""}function da(e,t){return e.setQueryParameter("insideBoundingBox",t)}function pa(g){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(g,la()),function(c){function s(e){if(e.aroundLatLng){var e=e.aroundLatLng,t=e.match(ft);if(t)return{lat:parseFloat(t[1]),lng:parseFloat(t[2])};throw new Error('Invalid value for "aroundLatLng" parameter: "'.concat(e,'"'))}}function u(){return m.internalToggleRefineOnMapMove()}function a(e,t){return function(){m.isRefineOnMapMove=!m.isRefineOnMapMove,t(e)}}function f(){return m.isRefineOnMapMove}function l(){return m.internalSetMapMoveSinceLastRefine()}function o(t,r){return function(){var e=!0!==m.hasMapMoveSinceLastRefine;m.hasMapMoveSinceLastRefine=!0,e&&r(t)}}function h(){return m.hasMapMoveSinceLastRefine}var d,e=c||{},t=e.enableRefineOnMapMove,e=e.transformItems,p=void 0===e?function(e){return e}:e,m={isRefineOnMapMove:void 0===t||t,hasMapMoveSinceLastRefine:!1,lastRefinePosition:"",lastRefineBoundingBox:"",internalToggleRefineOnMapMove:v,internalSetMapMoveSinceLastRefine:v};return{$$type:ma,init:function(e){var t=e.instantSearchInstance;m.internalToggleRefineOnMapMove=a(e,v),m.internalSetMapMoveSinceLastRefine=o(e,v),g(fa(fa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.helper,r=e.instantSearchInstance,t=t.state,n=Boolean(t.aroundLatLng)&&Boolean(m.lastRefinePosition)&&t.aroundLatLng!==m.lastRefinePosition,i=!t.insideBoundingBox&&Boolean(m.lastRefineBoundingBox)&&t.insideBoundingBox!==m.lastRefineBoundingBox,n=((n||i)&&(m.hasMapMoveSinceLastRefine=!1),m.lastRefinePosition=t.aroundLatLng||"",m.lastRefineBoundingBox=ha(t),m.internalToggleRefineOnMapMove=a(e,this.render.bind(this)),m.internalSetMapMoveSinceLastRefine=o(e,this.render.bind(this)),this.getWidgetRenderState(e));d("view:internal",n.items),g(fa(fa({},n),{},{instantSearchInstance:r}),!1)},getWidgetRenderState:function(e){var t,r,n,i=e.helper,a=e.results,e=e.instantSearchInstance,o=i.state,a=a?p(a.hits.filter(function(e){return e._geoloc}),{results:a}):[];return d=d||et({instantSearchInstance:e,index:i.getIndex(),widgetType:ma}),{items:a,position:s(o),currentRefinement:(e=o).insideBoundingBox&&lt(e.insideBoundingBox),refine:function(e){var t=e.northEast,e=e.southWest,t=[t.lat,t.lng,e.lat,e.lng].join();n.setState(da(n.state,t).resetPage()).search(),m.hasMapMoveSinceLastRefine=!1,m.lastRefineBoundingBox=t},sendEvent:d,clearMapRefinement:(r=n=i,function(){r.setQueryParameter("insideBoundingBox",void 0).search()}),isRefinedWithMap:(t=o,function(){return Boolean(t.insideBoundingBox)}),toggleRefineOnMapMove:u,isRefineOnMapMove:f,setMapMoveSinceLastRefine:l,hasMapMoveSinceLastRefine:h,widgetParams:c}},getRenderState:function(e,t){return fa(fa({},e),{},{geoSearch:this.getWidgetRenderState(t)})},dispose:function(e){e=e.state;return r(),e.setQueryParameter("insideBoundingBox",void 0)},getWidgetUiState:function(e,t){t=ha(t.searchParameters);return!t||e&&e.geoSearch&&e.geoSearch.boundingBox===t?e:fa(fa({},e),{},{geoSearch:{boundingBox:t}})},getWidgetSearchParameters:function(e,t){t=t.uiState;return t&&t.geoSearch?da(e,t.geoSearch.boundingBox):e.setQueryParameter("insideBoundingBox",void 0)}}}}var ma="ais.geoSearch";function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ya=["name","escapedValue","data","path"];function va(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?va(Object(r),!0).forEach(function(e){ba(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):va(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ba(e,t,r){return(t=function(e){e=function(e,t){if("object"!==ga(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ga(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sa(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?wa(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wa(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ja(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(s,Pa()),function(u){var e=u||{},f=e.attributes,t=e.separator,l=void 0===t?" > ":t,t=e.rootPath,n=void 0===t?null:t,t=e.showParentLevel,i=void 0===t||t,t=e.limit,a=void 0===t?10:t,t=e.showMore,h=void 0!==t&&t,t=e.showMoreLimit,o=void 0===t?20:t,t=e.sortBy,d=void 0===t?Ra:t,t=e.transformItems,p=void 0===t?function(e){return e}:t;if(!f||!Array.isArray(f)||0===f.length)throw new Error(Pa("The `attributes` option expects an array of strings."));if(!0===h&&o<=a)throw new Error(Pa("The `showMoreLimit` option must be greater than `limit`."));var m,g,y=Oa(f,1)[0],c=function(){};function v(){c()}var b=!1;function S(){return b?o:a}return{$$type:"ais.hierarchicalMenu",init:function(e){var t=e.instantSearchInstance;s(x(x({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t,r,n=e.instantSearchInstance;t=e,c=function(){b=!b,r.render(t)},s(x(x({},(r=this).getWidgetRenderState(e)),{},{instantSearchInstance:n}),!1)},dispose:function(e){e=e.state;return r(),e.removeHierarchicalFacet(y).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return x(x({},e),{},{hierarchicalMenu:x(x({},e.hierarchicalMenu),{},ba({},y,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=this,n=e.results,i=e.state,a=e.createURL,o=e.instantSearchInstance,c=e.helper,e=[],s=!1;return m=m||ze({instantSearchInstance:o,helper:c,attribute:function(e){e=e.split(l).length-1;return f[e]},widgetType:this.$$type}),g=g||function(e){m("click:internal",e),c.toggleFacetRefinement(y,e).search()},n&&(o=(o=n.getFacetValues(y,{sortBy:d,facetOrdering:d===Ra}))&&!Array.isArray(o)&&o.data?o.data:[],t=(i.maxValuesPerFacet||0)>S()?o.length<=S():o.length<S(),s=h&&(b||!t),e=p(function i(e){return e.slice(0,S()).map(function(e){var t=e.name,r=e.escapedValue,n=e.data,e=(e.path,x(x({},Sa(e,ya)),{},{value:r,label:t,data:null}));return Array.isArray(n)&&(e.data=i(n)),e})}(o),{results:n})),{items:e,refine:g,canRefine:0<e.length,createURL:function(t){return a(function(e){return r.getWidgetUiState(e,{searchParameters:i.resetPage().toggleFacetRefinement(y,t),helper:c})})},sendEvent:m,widgetParams:u,isShowingMore:b,toggleShowMore:v,canToggleShowMore:s}},getWidgetUiState:function(e,t){t=t.searchParameters.getHierarchicalFacetBreadcrumb(y);return t.length?x(x({},e),{},{hierarchicalMenu:x(x({},e.hierarchicalMenu),{},ba({},y,t))}):e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[y];if(e.isConjunctiveFacet(y)||e.isDisjunctiveFacet(y))return e;e.isHierarchicalFacet(y)&&e.getHierarchicalFacetByName(y);var e=e.removeHierarchicalFacet(y).addHierarchicalFacet({name:y,attributes:f,separator:l,rootPath:n,showParentLevel:i}),r=e.maxValuesPerFacet||0,r=Math.max(r,h?o:a),e=e.setQueryParameter("maxValuesPerFacet",r);return t?e.addHierarchicalFacetRefinement(y,t.join(l)):e.setQueryParameters({hierarchicalFacetsRefinements:x(x({},e.hierarchicalFacetsRefinements),{},ba({},y,[]))})}}}}var Pa=i({name:"hierarchical-menu",connector:!0}),Ra=["name:asc"];function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xa(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ea(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xa(Object(r),!0).forEach(function(e){Ia(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xa(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ia(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Fa(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Fa(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aa(r){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(r,Ta()),function(n){var i,a,e=n||{},t=e.escapeHTML,o=void 0===t||t,t=e.transformItems,c=void 0===t?function(e){return e}:t;return{$$type:"ais.hits",init:function(e){r(Ea(Ea({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(Ea(Ea({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1),t.sendEvent("view:internal",t.hits)},getRenderState:function(e,t){return Ea(Ea({},e),{},{hits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||et({instantSearchInstance:e,index:r.getIndex(),widgetType:this.$$type}),a=a||tt({index:r.getIndex(),widgetType:this.$$type,instantSearchInstance:e}),!t)return{hits:[],results:void 0,sendEvent:i,bindEvent:a,widgetParams:n};o&&0<t.hits.length&&(t.hits=$e(t.hits));r=Rt(Ot(t.hits,t.page,t.hitsPerPage),t.queryID);return{hits:c(r,{results:t}),results:t,sendEvent:i,bindEvent:a,widgetParams:n}},dispose:function(e){e=e.state;return s(),o?e.setQueryParameters(Object.keys(Me).reduce(function(e,t){return Ea(Ea({},e),{},Ia({},t,void 0))},{})):e},getWidgetSearchParameters:function(e){return o?e.setQueryParameters(Me):e}}}}var Ta=i({name:"hits",connector:!0});function _a(e){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Da(e){return function(e){if(Array.isArray(e))return Na(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Na(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Na(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ka(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function E(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ka(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==_a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==_a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===_a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ka(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ha(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(n,Wa()),function(o){var e=o||{},t=e.items,e=e.transformItems,c=void 0===e?function(e){return e}:e;if(!Array.isArray(t))throw new Error(Wa("The `items` option expects an array of objects."));var s=t,e=s.filter(function(e){return!0===e.default});if(0===e.length)throw new Error(Wa("A default value must be specified in `items`."));if(1<e.length)throw new Error(Wa("More than one default value is specified in `items`."));var r=e[0],u=function(t){return function(e){return(e||0===e?t.setQueryParameter("hitsPerPage",e):t.setQueryParameter("hitsPerPage",void 0)).search()}},f=function(e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(t){return n(function(e){return i(e,{searchParameters:r.resetPage().setQueryParameter("hitsPerPage",t||0===t?t:void 0),helper:a})})}};return{$$type:"ais.hitsPerPage",init:function(e){var t=e.state,r=e.instantSearchInstance;s.some(function(e){return Number(t.hitsPerPage)===Number(e.value)})||(s=[{value:"",label:""}].concat(Da(s))),n(E(E({},this.getWidgetRenderState(e)),{},{instantSearchInstance:r}),!0)},render:function(e){var t=e.instantSearchInstance;n(E(E({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),e.setQueryParameter("hitsPerPage",void 0)},getRenderState:function(e,t){return E(E({},e),{},{hitsPerPage:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r=e.state,n=e.results,i=e.createURL,e=e.helper,a=!!n&&0<n.nbHits;return{items:c((t=r.hitsPerPage,s.map(function(e){return E(E({},e),{},{isRefined:Number(e.value)===Number(t)})})),{results:n}),refine:u(e),createURL:f({state:r,createURL:i,getWidgetUiState:this.getWidgetUiState,helper:e}),hasNoResults:!a,canRefine:a,widgetParams:o}},getWidgetUiState:function(e,t){t=t.searchParameters.hitsPerPage;return void 0===t||t===r.value?e:E(E({},e),{},{hitsPerPage:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameters({hitsPerPage:t.hitsPerPage||r.value})}}}}var Wa=i({name:"hits-per-page",connector:!0});function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var La=["page"],Ma=["clickAnalytics","userToken"];function Ua(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ua(Object(r),!0).forEach(function(e){Qa(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ua(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Qa(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Ca(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ca(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ca(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $a(e){return function(e){if(Array.isArray(e))return Ba(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Ba(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ba(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qa(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var Va=i({name:"infinite-hits",connector:!0});function Ja(e){e=e||{};e.page;return qa(e,La)}function za(e){e=e||{};e.clickAnalytics,e.userToken;return qa(e,Ma)}function Xa(i){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(i,Va()),function(d){var r,n,p,m,g,y,e=d||{},t=e.escapeHTML,v=void 0===t||t,t=e.transformItems,b=void 0===t?function(e){return e}:t,t=e.cache,S=void 0===t?(n=r=null,{read:function(e){e=e.state;return xt(n,Ja(e))?r:null},write:function(e){var t=e.state,e=e.hits;n=Ja(t),r=e}}):t,O=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.min.apply(Math,[e].concat($a(t)))},w=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.max.apply(Math,[e].concat($a(t)))};return{$$type:"ais.infiniteHits",init:function(e){i(I(I({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e);i(I(I({},e),{},{instantSearchInstance:t}),!1),g("view:internal",e.currentPageHits)},getRenderState:function(e,t){return I(I({},e),{},{infiniteHits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r,n,i,a=e.results,o=e.helper,c=e.parent,s=e.state,e=e.instantSearchInstance,u=[],c=c.getPreviousState()||s,s=S.read({state:za(c)})||{},f=a?(l=void 0===(l=c.page)?0:l,v&&0<a.hits.length&&(a.hits=$e(a.hits)),h=Rt(Ot(a.hits,a.page,a.hitsPerPage),a.queryID),h=b(h,{results:a}),t=!1,Et(e.mainIndex,function(e){!t&&e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})&&(t=!0)}),f=!(null!=(f=c.disjunctiveFacets)&&f.length||(c.facets||[]).filter(function(e){return"*"!==e}).length||null!=(f=c.hierarchicalFacets)&&f.length),void 0!==s[l]||a.__isArtificial||"idle"!==e.status||t&&f||(s[l]=h,S.write({state:za(c),hits:s})),u=h,0===O(c,s)):(p=function(){n.overrideStateWithoutTriggeringChangeEvent(I(I({},n.state),{},{page:O(n.state,S.read({state:za(n.state)})||{})-1})).searchWithoutTriggeringOnStateChange()},m=function(){r.setPage(w(r.state,S.read({state:za(r.state)})||{})+1).search()},g=et({instantSearchInstance:e,index:(r=n=o).getIndex(),widgetType:this.$$type}),y=tt({index:o.getIndex(),widgetType:this.$$type,instantSearchInstance:e}),void 0===c.page||0===O(c,s)),l=(i=s,Object.keys(i).map(Number).sort(function(e,t){return e-t}).reduce(function(e,t){return e.concat(i[t])},[])),h=!a||a.nbPages<=w(c,s)+1;return{hits:l,currentPageHits:u,sendEvent:g,bindEvent:y,results:a,showPrevious:p,showMore:m,isFirstPage:f,isLastPage:h,widgetParams:d}},dispose:function(e){e=e.state,a(),e=e.setQueryParameter("page",void 0);return v?e.setQueryParameters(Object.keys(Me).reduce(function(e,t){return I(I({},e),{},Qa({},t,void 0))},{})):e},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?I(I({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,r=e,e=(v&&(r=e.setQueryParameters(Me)),t.page?t.page-1:0);return r.setQueryParameter("page",e)}}}}var Ka=["name","escapedValue","path"];function Ga(e){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Ya(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?eo(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eo(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function to(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?to(Object(r),!0).forEach(function(e){ro(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):to(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ro(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Ga(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ga(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function no(r){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(r,io()),function(f){var l,h,d,e=f||{},p=e.attribute,t=e.limit,n=void 0===t?10:t,t=e.showMore,m=void 0!==t&&t,t=e.showMoreLimit,i=void 0===t?20:t,t=e.sortBy,g=void 0===t?ao:t,t=e.transformItems,y=void 0===t?function(e){return e}:t;if(!p)throw new Error(io("The `attribute` option is required."));if(!0===m&&i<=n)throw new Error(io("The `showMoreLimit` option must be greater than `limit`."));var v=!1,b=function(){};function S(){b()}function O(){return v?i:n}return{$$type:"ais.menu",init:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return a(),e.removeHierarchicalFacet(p).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return A(A({},e),{},{menu:A(A({},e.menu),{},ro({},p,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.createURL,o=e.instantSearchInstance,c=e.helper,s=[],u=!1;return l=l||ze({instantSearchInstance:o,helper:c,attribute:p,widgetType:this.$$type}),h=h||function(t){return a(function(e){return n.getWidgetUiState(e,{searchParameters:c.state.resetPage().toggleFacetRefinement(p,t),helper:c})})},d=d||function(e){var t=Ya(c.getHierarchicalFacetBreadcrumb(p),1)[0];l("click:internal",e||t),c.toggleFacetRefinement(p,e||t).search()},e.results&&(t=e,r=this,b=function(){v=!v,r.render(t)}),i&&(e=(o=i.getFacetValues(p,{sortBy:g,facetOrdering:g===ao}))&&!Array.isArray(o)&&o.data?o.data:[],u=m&&(v||e.length>O()),s=y(e.slice(0,O()).map(function(e){var t=e.name,r=e.escapedValue;e.path;return A(A({},Za(e,Ka)),{},{label:t,value:r})}),{results:i})),{items:s,createURL:h,refine:d,sendEvent:l,canRefine:0<s.length,widgetParams:f,isShowingMore:v,toggleShowMore:S,canToggleShowMore:u}},getWidgetUiState:function(e,t){t=Ya(t.searchParameters.getHierarchicalFacetBreadcrumb(p),1)[0];return t?A(A({},e),{},{menu:A(A({},e.menu),{},ro({},p,t))}):e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.menu&&t.menu[p];return e.isConjunctiveFacet(p)||e.isDisjunctiveFacet(p)?e:(r=(e=e.removeHierarchicalFacet(p).addHierarchicalFacet({name:p,attributes:[p]})).maxValuesPerFacet||0,r=Math.max(r,m?i:n),e=e.setQueryParameter("maxValuesPerFacet",r),t?e.addHierarchicalFacetRefinement(p,t):e.setQueryParameters({hierarchicalFacetsRefinements:A(A({},e.hierarchicalFacetsRefinements),{},ro({},p,[]))}))}}}}var io=i({name:"menu",connector:!0}),ao=["isRefined","name:asc"];function oo(e){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||so(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){var r;if(e)return"string"==typeof e?uo(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uo(e,t):void 0}function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(r),!0).forEach(function(e){lo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function lo(e,t,r){return(t=function(e){e=function(e,t){if("object"!==oo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===oo(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ho(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(r,po()),function(h){var d,e=h||{},t=e.attribute,p=void 0===t?"":t,t=e.items,m=void 0===t?[]:t,t=e.transformItems,g=void 0===t?function(e){return e}:t;if(""===p)throw new Error(po("The `attribute` option is required."));if(m&&0!==m.length)return d={},{$$type:mo,init:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.clearRefinements(p)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(p),r=t["="]&&t["="][0];return r||0===r?T(T({},e),{},{numericMenu:T(T({},e.numericMenu),{},lo({},p,"".concat(t["="])))}):(r=t[">="]&&t[">="][0]||"",t=t["<="]&&t["<="][0]||"",""===r&&""===t?e:T(T({},e),{},{numericMenu:T(T({},e.numericMenu),{},lo({},p,"".concat(r,":").concat(t)))}))},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.numericMenu&&t.numericMenu[p],e=e.clearRefinements(p);return t?-1===t.indexOf(":")?e.addNumericRefinement(p,"=",Number(t)):(r=(t=co(t.split(":").map(parseFloat),2))[0],t=t[1],r=b(r)?e.addNumericRefinement(p,">=",r):e,b(t)?r.addNumericRefinement(p,"<=",t):r):e.setQueryParameters({numericRefinements:T(T({},e.numericRefinements),{},lo({},p,{}))})},getRenderState:function(e,t){return T(T({},e),{},{numericMenu:T(T({},e.numericMenu),{},lo({},p,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var n,t,i=this,r=e.results,a=e.state,o=e.instantSearchInstance,c=e.helper,s=e.createURL,e=(d.refine||(d.refine=function(e){var t=vo(c.state,p,e);d.sendEvent("click:internal",e),c.setState(t).search()}),d.createURL||(d.createURL=function(r){return function(t){return s(function(e){return i.getWidgetUiState(e,{searchParameters:vo(r,p,t),helper:c})})}}),d.sendEvent||(d.sendEvent=go({instantSearchInstance:o})),!r||0===r.nbHits),o=(n=a,m.map(function(e){var t=e.start,r=e.end,e=e.label;return{label:e,value:encodeURI(JSON.stringify({start:t,end:r})),isRefined:yo(n,p,{start:t,end:r,label:e})}})),u=!0,f=function(e,t){var r,n,i,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return n=!(r=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return r=e.done,e},e:function(e){n=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(n)throw i}}};if(Array.isArray(e)||(o=so(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(o);try{for(f.s();!(t=f.n()).done;){var l=t.value;if(l.isRefined&&"{}"!==decodeURI(l.value)){u=!1;break}}}catch(e){f.e(e)}finally{f.f()}return{createURL:d.createURL(a),items:g(o,{results:r}),hasNoResults:e,canRefine:!(e&&u),refine:d.refine,sendEvent:d.sendEvent,widgetParams:h}}};throw new Error(po("The `items` option expects an array of objects."))}}var po=i({name:"numeric-menu",connector:!0}),mo="ais.numericMenu",go=function(e){var t=e.instantSearchInstance;return function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}};function yo(e,t,r){var n=e.getNumericRefinements(t);return void 0!==r.start&&void 0!==r.end?r.start===r.end?bo(n,"=",r.start):bo(n,">=",r.start)&&bo(n,"<=",r.end):void 0!==r.start?bo(n,">=",r.start):void 0!==r.end?bo(n,"<=",r.end):void 0===r.start&&void 0===r.end&&Object.keys(n).every(function(e){return 0===(n[e]||[]).length})}function vo(e,t,r){var r=JSON.parse(decodeURI(r)),n=e.getNumericRefinements(t);if(void 0===r.start&&void 0===r.end)return e.removeNumericRefinement(t);if(yo(e,t,r)||(e=e.removeNumericRefinement(t)),void 0!==r.start&&void 0!==r.end){if(r.start>r.end)throw new Error("option.start should be > to option.end");if(r.start===r.end)return e=bo(n,"=",r.start)?e.removeNumericRefinement(t,"=",r.start):e.addNumericRefinement(t,"=",r.start)}return void 0!==r.start&&(e=(e=bo(n,">=",r.start)?e.removeNumericRefinement(t,">=",r.start):e).addNumericRefinement(t,">=",r.start)),"number"==typeof(e=void 0!==r.end?(e=bo(n,"<=",r.end)?e.removeNumericRefinement(t,"<=",r.end):e).addNumericRefinement(t,"<=",r.end):e).page&&(e.page=0),e}function bo(e,t,r){return void 0!==e[t]&&e[t].includes(r)}function So(e){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jo(n.key),n)}}function wo(e,t,r){(t=jo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function jo(e){e=function(e,t){if("object"!==So(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==So(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===So(e)?e:String(e)}var Po=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");wo(this,"currentPage",void 0),wo(this,"total",void 0),wo(this,"padding",void 0),this.currentPage=e.currentPage,this.total=e.total,this.padding=e.padding}var e,r,n;return e=t,(r=[{key:"pages",value:function(){var e,t=this.total,r=this.currentPage,n=this.padding;return 0===t?[0]:Ct((e=this.nbPagesDisplayed(n,t))===t?{end:t}:{start:r-(n=this.calculatePaddingLeft(r,n,t,e)),end:r+(e-n)})}},{key:"nbPagesDisplayed",value:function(e,t){return Math.min(2*e+1,t)}},{key:"calculatePaddingLeft",value:function(e,t,r,n){return e<=t?e:r-t<=e?n-(r-e):t}},{key:"isLastPage",value:function(){return this.currentPage===this.total-1||0===this.total}},{key:"isFirstPage",value:function(){return 0===this.currentPage}}])&&Oo(e.prototype,r),n&&Oo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ro(e){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Fo(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Ro(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ro(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ro(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Fo(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function xo(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(r,Eo()),function(a){var e=a||{},o=e.totalPages,e=e.padding,c=new Po({currentPage:0,total:0,padding:void 0===e?3:e}),s={};return{$$type:"ais.pagination",init:function(e){var t=e.instantSearchInstance;r(_(_({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(_(_({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("page",void 0)},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?_(_({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.page?t.page-1:0;return e.setQueryParameter("page",t)},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,i=e.createURL,e=(s.refine||(s.refine=function(e){r.setPage(e),r.search()}),s.createURL||(s.createURL=function(t){return i(function(e){return _(_({},e),{},{page:t+1})})}),n.page||0),n=(n=(n=t||{nbPages:0}).nbPages,void 0!==o?Math.min(o,n):n);return c.currentPage=e,c.total=n,{createURL:s.createURL,refine:s.refine,canRefine:1<n,currentRefinement:e,nbHits:(null==t?void 0:t.nbHits)||0,nbPages:n,pages:t?c.pages():[],isFirstPage:c.isFirstPage(),isLastPage:c.isLastPage(),widgetParams:a}},getRenderState:function(e,t){return _(_({},e),{},{pagination:this.getWidgetRenderState(t)})}}}}var Eo=i({name:"pagination",connector:!0});function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ao(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function To(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ao(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Io(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Io(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Io(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ao(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function _o(e){return function(e){if(Array.isArray(e))return Do(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Do(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Do(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Do(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var No=i({name:"query-rules",connector:!0});function ko(e){var i,a,o,t=this.helper,r=this.initialRuleContexts,n=this.trackedFilters,c=this.transformRuleContexts,e=e.state,s=e.ruleContexts||[],n=(i=(n={helper:t,sharedHelperState:e,trackedFilters:n}).helper,a=n.sharedHelperState,o=n.trackedFilters,Object.keys(o).reduce(function(e,t){var r=yt(i.lastResults||{},a,!0).filter(function(e){return e.attribute===t}).map(function(e){return e.numericValue||e.name}),n=(0,o[t])(r);return[].concat(_o(e),_o(r.filter(function(e){return n.includes(e)}).map(function(e){return"ais-".concat(t,"-").concat(e).replace(/[^a-z0-9-_]+/gi,"_")})))},[])),c=c([].concat(_o(r),_o(n))).slice(0,10);xt(s,c)||t.overrideStateWithoutTriggeringChangeEvent(To(To({},e),{},{ruleContexts:c}))}function Ho(f){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(f,No()),function(i){var a,e=i||{},t=e.trackedFilters,o=void 0===t?{}:t,t=e.transformRuleContexts,c=void 0===t?function(e){return e}:t,t=e.transformItems,r=void 0===t?function(e){return e}:t,s=(Object.keys(o).forEach(function(e){if("function"!=typeof o[e])throw new Error(No("'The \"".concat(e,'" filter value in the `trackedFilters` option expects a function.')))}),0<Object.keys(o).length),u=[];return{$$type:"ais.queryRules",init:function(e){var t=e.helper,r=e.state,n=e.instantSearchInstance;u=r.ruleContexts||[],a=ko.bind({helper:t,initialRuleContexts:u,trackedFilters:o,transformRuleContexts:c}),s&&(([r.disjunctiveFacetsRefinements,r.facetsRefinements,r.hierarchicalFacetsRefinements,r.numericRefinements].some(function(e){return Boolean(e&&0<Object.keys(e).length)})||Boolean(i.transformRuleContexts))&&a({state:r}),t.on("change",a)),f(To(To({},this.getWidgetRenderState(e)),{},{instantSearchInstance:n}),!0)},render:function(e){var t=e.instantSearchInstance;f(To(To({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},getWidgetRenderState:function(e){var e=e.results,t=(e||{}).userData;return{items:r(void 0===t?[]:t,{results:e}),widgetParams:i}},getRenderState:function(e,t){return To(To({},e),{},{queryRules:this.getWidgetRenderState(t)})},dispose:function(e){var t=e.helper,e=e.state;return n(),s?(t.removeListener("change",a),e.setQueryParameter("ruleContexts",u)):e}}}}function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Co(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Co(Object(r),!0).forEach(function(e){Lo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Co(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Lo(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Wo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Wo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Wo(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?Uo(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uo(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qo=i({name:"range-input",connector:!0},{name:"range-slider",connector:!0}),$o="ais.range";function Bo(e){var t=e.min,r=e.max,e=e.precision,e=Math.pow(10,e);return{min:t&&Math.floor(t*e)/e,max:r&&Math.ceil(r*e)/e}}function qo(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(r,Qo()),function(c){var e=c||{},t=e.attribute,u=void 0===t?"":t,f=e.min,l=e.max,t=e.precision,h=void 0===t?0:t;if(!u)throw new Error(Qo("The `attribute` option is required."));if(b(f)&&b(l)&&l<f)throw new Error(Qo("The `max` option can't be lower than `min`."));var s={from:function(e){return e.toLocaleString()},to:function(e){return Number(Number(e).toFixed(h)).toLocaleString()}},i=function(e,t,r,n){var e=e.state,i=t.min,t=t.max,a=Mo(e.getNumericRefinement(u,">=")||[],1)[0],o=Mo(e.getNumericRefinement(u,"<=")||[],1)[0],c=void 0===r||""===r,s=void 0===n||""===n,r=Bo({min:c?void 0:parseFloat(r),max:s?void 0:parseFloat(n),precision:h}),n=r.min,r=r.max,c=b(f)||i!==n?b(f)&&c?f:n:void 0,n=b(l)||t!==r?b(l)&&s?l:r:void 0,s=void 0===c,r=b(i)&&i<=c,s=s||b(c)&&(!b(i)||r),i=void 0===n,r=b(n)&&n<=t,i=i||b(n)&&(!b(t)||r);return(a!==c||o!==n)&&s&&i?(e=e.removeNumericRefinement(u),b(c)&&(e=e.addNumericRefinement(u,">=",c)),(e=b(n)?e.addNumericRefinement(u,"<=",n):e).resetPage()):null};function d(r,n){return function(){var e=Mo(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[void 0,void 0],2),t=e[0],e=e[1],t=i(r,n,t,e);t&&r.setState(t).search()}}return{$$type:$o,init:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return D(D({},e),{},{range:D(D({},e.range),{},Lo({},u,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=e.results,n=e.helper,e=e.instantSearchInstance,i=ct(r&&r.disjunctiveFacets||[],function(e){return e.name===u}),i=i&&i.stats||{min:void 0,max:void 0},a=(i=i,a=b(f)?f:b(i.min)?i.min:0,i=b(l)?l:b(i.max)?i.max:0,Bo({min:a,max:i,precision:h})),o=(o=Mo((i=n).getNumericRefinement(u,">=")||[],1)[0],i=Mo(i.getNumericRefinement(u,"<=")||[],1)[0],[b(o)?o:-1/0,b(i)?i:1/0]),i=d(n,r?a:{min:void 0,max:void 0});return{refine:i,canRefine:a.min!==a.max,format:s,range:a,sendEvent:(t=e,function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}),widgetParams:D(D({},c),{},{precision:h}),start:o}},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(u).removeNumericRefinement(u)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(u),r=t[">="],r=void 0===r?[]:r,t=t["<="],t=void 0===t?[]:t;return 0===r.length&&0===t.length?e:D(D({},e),{},{range:D(D({},e.range),{},Lo({},u,"".concat(r,":").concat(t)))})},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,e=e.addDisjunctiveFacet(u).setQueryParameters({numericRefinements:D(D({},e.numericRefinements),{},Lo({},u,{}))}),t=(b(f)&&(e=e.addNumericRefinement(u,">=",f)),b(l)&&(e=e.addNumericRefinement(u,"<=",l)),t.range&&t.range[u]);return e=t&&-1!==t.indexOf(":")&&(r=(t=Mo(t.split(":").map(parseFloat),2))[0],t=t[1],b(r)&&(!b(f)||f<r)&&(e=(e=e.removeNumericRefinement(u,">=")).addNumericRefinement(u,">=",r)),b(t))&&(!b(l)||t<l)?(e=e.removeNumericRefinement(u,"<=")).addNumericRefinement(u,"<=",t):e}}}}function Vo(e){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Jo=["name","escapedValue"],zo=["escapedValue","value"];function Xo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xo(Object(r),!0).forEach(function(e){Ko(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ko(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Vo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Vo(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Go(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Zo(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(s,Yo()),function(h){var e=h||{},d=e.attribute,t=e.operator,i=void 0===t?"or":t,t=e.limit,p=void 0===t?10:t,t=e.showMore,m=void 0!==t&&t,t=e.showMoreLimit,a=void 0===t?20:t,t=e.sortBy,g=void 0===t?ec:t,t=e.escapeFacetValues,c=void 0===t||t,t=e.transformItems,y=void 0===t?function(e){return e}:t;if(!d)throw new Error(Yo("The `attribute` option is required."));if(!/^(and|or)$/.test(i))throw new Error(Yo('The `operator` must one of: `"and"`, `"or"` (got "'.concat(i,'").')));if(!0===m&&a<=p)throw new Error(Yo("`showMoreLimit` should be greater than `limit`."));function v(e){var t=e.name,r=e.escapedValue;return N(N({},Go(e,Jo)),{},{value:r,label:t,highlighted:t})}var b,S,O,w=[],j=!0,P=!1,R=function(){};function F(){R()}function x(){return P?a:p}function E(a,o){return function(i){return function(e){var t,r=i.instantSearchInstance,n=i.results;""===e&&w?s(N(N({},o.getWidgetRenderState(N(N({},i),{},{results:b}))),{},{instantSearchInstance:r}),!1):(t={highlightPreTag:(c?Me:u).highlightPreTag,highlightPostTag:(c?Me:u).highlightPostTag},a.searchForFacetValues(d,e,Math.min(x(),100),t).then(function(e){e=c?e.facetHits.map(function(e){return Ce(Ce({},e),{},{highlighted:Ue(e.highlighted)})}):e.facetHits,e=y(e.map(function(e){var t=e.escapedValue,r=e.value;return N(N({},Go(e,zo)),{},{value:t,label:r})}),{results:n});s(N(N({},o.getWidgetRenderState(N(N({},i),{},{results:b}))),{},{items:e,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:r}),!1)}))}}}var I=function(){return function(){}};return{$$type:"ais.refinementList",init:function(e){s(N(N({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){s(N(N({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return N(N({},e),{},{refinementList:N(N({},e.refinementList),{},Ko({},d,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.state,o=e.createURL,c=e.instantSearchInstance,s=e.helper,u=[],f=[],c=(O&&S&&I||(O=ze({instantSearchInstance:c,helper:s,attribute:d,widgetType:this.$$type}),S=function(e){O("click:internal",e),s.toggleFacetRefinement(d,e).search()},I=E(s,this)),i&&(f=(c=i.getFacetValues(d,{sortBy:g,facetOrdering:g===ec}))&&Array.isArray(c)?c:[],u=y(f.slice(0,x()).map(v),{results:i}),c=a.maxValuesPerFacet,l=x(),j=l<c?f.length<=l:f.length<l,b=i,w=u,e.results)&&(t=e,r=this,R=function(){P=!P,r.render(t)}),I&&I(e)),f=P&&w.length>p,l=m&&!j;return{createURL:function(t){return o(function(e){return n.getWidgetUiState(e,{searchParameters:a.resetPage().toggleFacetRefinement(d,t),helper:s})})},items:u,refine:S,searchForItems:c,isFromSearch:!1,canRefine:0<u.length,widgetParams:h,isShowingMore:P,canToggleShowMore:f||l,toggleShowMore:F,sendEvent:O,hasExhaustiveItems:j}},dispose:function(e){e=e.state,r(),e=e.setQueryParameter("maxValuesPerFacet",void 0);return"and"===i?e.removeFacet(d):e.removeDisjunctiveFacet(d)},getWidgetUiState:function(e,t){t=t.searchParameters,t="or"===i?t.getDisjunctiveRefinements(d):t.getConjunctiveRefinements(d);return t.length?N(N({},e),{},{refinementList:N(N({},e.refinementList),{},Ko({},d,t))}):e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,n="or"===i;return e.isHierarchicalFacet(d)||n&&e.isConjunctiveFacet(d)||!n&&e.isDisjunctiveFacet(d)?e:(t=t.refinementList&&t.refinementList[d],e=e.clearRefinements(d),r=(e=n?e.addDisjunctiveFacet(d):e.addFacet(d)).maxValuesPerFacet||0,r=Math.max(r,m?a:p),e=e.setQueryParameter("maxValuesPerFacet",r),t?t.reduce(function(e,t){return n?e.addDisjunctiveFacetRefinement(d,t):e.addFacetRefinement(d,t)},e):e.setQueryParameters(Ko({},r=n?"disjunctiveFacetsRefinements":"facetsRefinements",N(N({},e[r]),{},Ko({},d,[])))))}}}}var Yo=i({name:"refinement-list",connector:!0}),ec=["isRefined","count:desc","name:asc"];function tc(e){return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function nc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==tc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==tc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===tc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):rc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ic(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(r,ac()),function(n){var i,a,e=(n||{}).queryHook,o=void 0===e?oc:e;return{$$type:"ais.searchBox",init:function(e){var t=e.instantSearchInstance;r(nc(nc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(nc(nc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("query",void 0)},getRenderState:function(e,t){return nc(nc({},e),{},{searchBox:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.helper,r=e.searchMetadata,e=e.state;return i||(i=function(e){o(e,function(e){return t.setQuery(e).search()})},a=function(){t.setQuery("").search()}),{query:e.query||"",refine:i,clear:a,widgetParams:n,isSearchStalled:r.isSearchStalled}},getWidgetUiState:function(e,t){t=t.searchParameters.query||"";return""===t||e&&e.query===t?e:nc(nc({},e),{},{query:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("query",t.query||"")}}}}var ac=i({name:"search-box",connector:!0}),oc=function(e,t){return t(e)};function cc(e){return(cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function uc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?sc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==cc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==cc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===cc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):sc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function fc(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v,c=(h(n,lc()),{});return function(i){var e=i||{},a=e.items,e=e.transformItems,o=void 0===e?function(e){return e}:e;if(Array.isArray(a))return{$$type:"ais.sortBy",init:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e),r=e.currentRefinement;ct(a,function(e){return e.value===r});n(uc(uc({},e),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(uc(uc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),c.initialIndex?e.setIndex(c.initialIndex):e},getRenderState:function(e,t){return uc(uc({},e),{},{sortBy:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,e=e.parent,e=(!c.initialIndex&&e&&(c.initialIndex=e.getIndexName()),c.setIndex||(c.setIndex=function(e){r.setIndex(e).search()}),!t||0===t.nbHits);return{currentRefinement:n.index,options:o(a,{results:t}),refine:c.setIndex,hasNoResults:e,canRefine:!e&&0<a.length,widgetParams:i}},getWidgetUiState:function(e,t){t=t.searchParameters.index;return uc(uc({},e),{},{sortBy:t!==c.initialIndex?t:void 0})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("index",t.sortBy||c.initialIndex||e.index)}};throw new Error(lc("The `items` option expects an array of objects."))}}var lc=i({name:"sort-by",connector:!0});function hc(e){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function pc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?dc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==hc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==hc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===hc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):dc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function mc(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(n,gc()),function(r){return{$$type:"ais.stats",init:function(e){var t=e.instantSearchInstance;n(pc(pc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(pc(pc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){e()},getRenderState:function(e,t){return pc(pc({},e),{},{stats:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,e=e.state;return t?{hitsPerPage:t.hitsPerPage,nbHits:t.nbHits,nbSortedHits:t.nbSortedHits,areHitsSorted:void 0!==t.appliedRelevancyStrictness&&0<t.appliedRelevancyStrictness&&t.nbSortedHits!==t.nbHits,nbPages:t.nbPages,page:t.page,processingTimeMS:t.processingTimeMS,query:t.query,widgetParams:r}:{hitsPerPage:e.hitsPerPage,nbHits:0,nbSortedHits:void 0,areHitsSorted:!1,nbPages:0,page:e.page||0,processingTimeMS:-1,query:e.query||"",widgetParams:r}}}}}var gc=i({name:"stats",connector:!0});function yc(e){return(yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vc(Object(r),!0).forEach(function(e){bc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function bc(e,t,r){return(t=function(e){e=function(e,t){if("object"!==yc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==yc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===yc(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?Oc(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oc(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wc(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;return h(r,jc()),function(h){var d,p,m,g,y,e=h||{},v=e.attribute,t=e.on,e=e.off;if(v)return d=void 0!==e,p=Vt(void 0===t||t).map(ot),m=d?Vt(e).map(ot):void 0,y=function(t,e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(){r=r.resetPage();var e=t?p:m,e=(e&&e.forEach(function(e){r=r.removeDisjunctiveFacetRefinement(v,e)}),t?m:p);return e&&e.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),n(function(e){return i(e,{searchParameters:r,helper:a})})}},{$$type:Pc,init:function(e){var t=e.instantSearchInstance;r(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(v)},getRenderState:function(e,t){return k(k({},e),{},{toggleRefinement:k(k({},e.toggleRefinement),{},bc({},v,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r,t,n,i=e.state,a=e.helper,o=e.results,c=e.createURL,e=e.instantSearchInstance,s=o?p.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}):p.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}),u={isRefined:s,count:0},f={isRefined:d&&!s,count:0},l=(o&&(t=Vt(m||!1),r=o.getFacetValues(v,{})||[],l=p.map(function(t){return ct(r,function(e){return e.escapedValue===ot(String(t))})}).filter(function(e){return void 0!==e}),t=d?t.map(function(t){return ct(r,function(e){return e.escapedValue===ot(String(t))})}).filter(function(e){return void 0!==e}):[],u={isRefined:!!l.length&&l.every(function(e){return e.isRefined}),count:l.reduce(function(e,t){return e+t.count},0)||null},f={isRefined:!!t.length&&t.every(function(e){return e.isRefined}),count:t.reduce(function(e,t){return e+t.count},0)||r.reduce(function(e,t){return e+t.count},0)}),g=g||Rc({instantSearchInstance:e,attribute:v,on:p,helper:a}),s?f:u);return{value:{name:v,isRefined:s,count:o?l.count:null,onFacetValue:u,offFacetValue:f},createURL:y(s,{state:i,createURL:c,helper:a,getWidgetUiState:this.getWidgetUiState}),sendEvent:g,canRefine:Boolean(o?l.count:null),refine:(n=a,function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefined:!1}).isRefined;e?(p.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),d&&m.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})):(g("click:internal",e),d&&m.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),p.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})),n.search()}),widgetParams:h}},getWidgetUiState:function(e,t){var r=t.searchParameters,t=p&&p.every(function(e){return r.isDisjunctiveFacetRefined(v,e)});return t?k(k({},e),{},{toggle:k(k({},e.toggle),{},bc({},v,t))}):(null!=(t=e.toggle)&&delete t[v],e)},getWidgetSearchParameters:function(e,t){var r,t=t.uiState;return e.isHierarchicalFacet(v)||e.isConjunctiveFacet(v)?e:(r=e.clearRefinements(v).addDisjunctiveFacet(v),Boolean(t.toggle&&t.toggle[v])?(p&&p.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):d?(m&&m.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):r.setQueryParameters({disjunctiveFacetsRefinements:k(k({},e.disjunctiveFacetsRefinements),{},bc({},v,[]))}))}};throw new Error(jc("The `attribute` option is required."))}}var jc=i({name:"toggle-refinement",connector:!0}),Pc="ais.toggleRefinement",Rc=function(e){var c=e.instantSearchInstance,s=e.helper,u=e.attribute,f=e.on;return function(){for(var e,t,r,n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];1===a.length?c.sendEventToInsights(a[0]):(e=a[1],t=void 0===(t=a[2])?"Filter Applied":t,r=(n=Sc(a[0].split(":"),2))[0],n=n[1],"click"!==r||void 0===f||e||c.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:Pc,eventType:r,eventModifier:n,payload:{eventName:t,index:s.getIndex(),filters:f.map(function(e){return"".concat(u,":").concat(e)})},attribute:u}))}};function Fc(e){return(Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ec(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?xc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Fc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Fc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Fc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):xc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ic(e){var t=e.children,r=e.renderToString,n=e.notifyServer,i=e.searchRef;return Promise.resolve().then(function(){r(s.createElement(pr.Provider,{value:{notifyServer:n}},t))}).then(function(){return new Promise(function(e){return setTimeout(e,0)})}).then(function(){if(i.current)return r=i.current,(n=r.mainHelper).searchOnlyWithDerivedHelpers(),new Promise(function(e,t){n.derivedHelpers[0].on("result",function(){e()}),n.on("error",function(e){t(e)}),r.on("error",function(e){t(e)}),n.derivedHelpers.forEach(function(e){return e.on("error",function(e){t(e)})})});throw new Error("Unable to retrieve InstantSearch's server state in `getServerState()`. Did you mount the <InstantSearch> component?");var r,n}).then(function(){return{initialResults:function(e){var r={};if(Et(e,function(e){var t=e.getResults();t&&(r[e.getIndexId()]={state:Ec({},t._state),results:t._rawResults})}),0===Object.keys(r).length)throw new Error("The root index does not have any results. Make sure you have at least one widget that provides results.");return r}(i.current.mainIndex)}})}e.Configure=function(e){return Pr(e,{$$widgetType:"ais.configure"}),null},e.DynamicWidgets=function(e){var t=e.children,r=void 0===(r=e.fallbackComponent)?_r:r,e=rr(e,Tr),n=s.useRef(r),r=Ar(e,{$$widgetType:"ais.dynamicWidgets"}).attributesToRender,i=new Map;return s.Children.forEach(t,function(e){var t=function e(t){if(!Dr(t))return;if(t.props.attribute)return t.props.attribute;if(Array.isArray(t.props.attributes))return t.props.attributes[0];if(t.props.children)return ur(1===s.Children.count(t.props.children)),e(s.Children.only(t.props.children));return}(e);ur(void 0!==t),i.set(t,e)}),s.createElement(s.Fragment,null,r.map(function(e){return s.createElement(g.Fragment,{key:e},i.get(e)||s.createElement(n.current,{attribute:e}))}))},e.Index=function(e){var t,r,n,i,a,o=e.children,c=(e=e=rr(e,Kr),t=mr(),r=null==(r=Xr())?void 0:r.initialResults,n=lr(),i=gr(e),c=(e=g.useMemo(function(){return qr(i)},[i])).getHelper(),a=Jr(),vr(function(){a()},[c,a]),Or({widget:e,parentIndex:n,props:i,shouldSsr:Boolean(t||r)}),e);return null===c.getHelper()?null:s.createElement(fr.Provider,{value:c},o)},e.InstantSearch=function(e){var t=e.children;return(e=_i(rr(e,Ni))).started?s.createElement(hr.Provider,{value:e},s.createElement(fr.Provider,{value:e.mainIndex},t)):null},e.InstantSearchRSCContext=br,e.InstantSearchSSRProvider=Hi,e.InstantSearchServerContext=pr,e.getServerState=function(r,e){function n(){var t=!1;return function(e){e=e.search;if(t)throw new Error("getServerState should be called with a single InstantSearchSSRProvider and a single InstantSearch component.");t=!0,a.current=e}}var i=e.renderToString,a={current:void 0};return Ic({children:r,renderToString:i,searchRef:a,notifyServer:n()}).then(function(e){var t=!1;return Et(a.current.mainIndex,function(e){t=t||e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})}),t?Ic({children:s.createElement(Hi,e,r),renderToString:i,searchRef:a,notifyServer:n()}):e})},e.useBreadcrumb=function(e,t){return l(Qi,e,t)},e.useClearRefinements=function(e,t){return l(Xi,e,t)},e.useConfigure=Pr,e.useConnector=l,e.useCurrentRefinements=function(e,t){return l(ra,e,t)},e.useDynamicWidgets=Ar,e.useGeoSearch=function(e,t){return l(pa,e,t)},e.useHierarchicalMenu=function(e,t){return l(ja,e,t)},e.useHits=function(e,t){return l(Aa,e,t)},e.useHitsPerPage=function(e,t){return l(Ha,e,t)},e.useInfiniteHits=function(e,t){return l(Xa,e,t)},e.useInstantSearch=function(){var t,r,n,i,a,o,c=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).catchError,s=dr();t=dr(),r=lr(),e=r.getIndexId(),l=(u=nr(g.useState(function(){return t.getUiState()}),2))[0],n=u[1],u=l[e],e=g.useCallback(function(e){t.setUiState(e)},[t]),f=g.useCallback(function(e){r.setIndexUiState(e)},[r]),g.useEffect(function(){function e(){n(t.getUiState())}return t.addListener("render",e),function(){t.removeListener("render",e)}},[t]);var e=(l={uiState:l,setUiState:e,indexUiState:u,setIndexUiState:f}).uiState,u=l.setUiState,f=l.indexUiState,l=l.setIndexUiState;i=dr(),a=lr(),d=nr(g.useState(function(){return sr(a)}),2),h=d[0],o=d[1],g.useEffect(function(){function e(){var e=a.getResults();null!==e&&o({results:e,scopedResults:a.getScopedResults()})}return i.addListener("render",e),function(){i.removeListener("render",e)}},[i,a]);var h=(d=h).results,d=d.scopedResults,p=g.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.use.apply(s,t),function(){s.unuse.apply(s,t)}},[s]),m=g.useCallback(function(){s.refresh()},[s]);return vr(function(){var e;return c?(s.addListener("error",e=function(){}),function(){return s.removeListener("error",e)}):function(){}},[s,c]),{results:h,scopedResults:d,uiState:e,setUiState:u,indexUiState:f,setIndexUiState:l,addMiddlewares:p,refresh:m,status:s.status,error:s.error}},e.useInstantSearchContext=dr,e.useMenu=function(e,t){return l(no,e,t)},e.useNumericMenu=function(e,t){return l(ho,e,t)},e.usePagination=function(e,t){return l(xo,e,t)},e.usePoweredBy=function(){var e=qt(function(e){return(null==(e=e.window.location)?void 0:e.hostname)||""},{fallback:function(){return""}});return{url:"https://www.algolia.com/?utm_source=react-instantsearch&utm_medium=website&utm_content=".concat(e,"&utm_campaign=poweredby")}},e.useQueryRules=function(e,t){return l(Ho,e,t)},e.useRSCContext=Sr,e.useRange=function(e,t){return l(qo,e,t)},e.useRefinementList=function(e,t){return l(Zo,e,t)},e.useSearchBox=function(e,t){return l(ic,e,t)},e.useSortBy=function(e,t){return l(fc,e,t)},e.useStats=function(e,t){return l(mc,e,t)},e.useToggleRefinement=function(e,t){return l(wc,e,t)},e.version=H,e.wrapPromiseWithState=function(e){var r;return"status"in e||((r=e).status="pending",r.then(function(e){var t;"pending"===r.status&&((t=r).status="fulfilled",t.value=e)},function(e){var t;"pending"===r.status&&((t=r).status="rejected",t.reason=e)})),e},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ReactInstantSearchCore.min.js.map
